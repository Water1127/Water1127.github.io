<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":20,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "0fccaaa9"
    });
  daovoice('update');
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Water">
<meta property="og:url" content="https://Water1127.github.io/index.html">
<meta property="og:site_name" content="Water">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Water">





  
  
  <link rel="canonical" href="https://Water1127.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Water</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Water</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    
  
  

  

  <a href="https://github.com/Water1177" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/21/redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/21/redis/" class="post-title-link" itemprop="url">Redis</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-21 15:21:46 / 修改时间：15:21:35" itemprop="dateCreated datePublished" datetime="2019-07-21T15:21:46+08:00">2019-07-21</time>
            </span>
          

          
            

            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">8.5k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">8 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="NoSQL概念"><a href="#NoSQL概念" class="headerlink" title="NoSQL概念"></a>NoSQL概念</h1><ul>
<li>NoSQL(NoSQL = Not Only SQL)，意即“不仅仅是SQL”，是一项全新的数据库理念，泛指非关系型的数据库。</li>
<li>随着互联网web- 0网站的兴起，传统的关系数据库在应付web- 0网站，特别是超大规模和高并发的SNS类型的web- 0纯动态网站已经显得力不从心，暴露了很多难以克服的问题，而非关系型的数据库则由于其本身的特点得到了非常迅速的发展。NoSQL数据库的产生就是为了解决大规模数据集合多重数据种类带来的挑战，尤其是大数据应用难题。<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2></li>
<li>成本：nosql数据库简单易部署，基本都是开源软件，不需要像使用oracle那样花费大量成本购买使用，相比关系型数据库价格便宜。</li>
<li>查询速度：nosql数据库将数据存储于缓存之中，关系型数据库将数据存储在硬盘中，自然查询速度远不及nosql数据库。</li>
<li>存储数据的格式：nosql的存储格式是key,value形式、文档形式、图片形式等等，所以可以存储基础类型以及对象或者是集合等各种格式，而数据库则只支持基础类型。</li>
<li>扩展性：关系型数据库有类似join这样的多表查询机制的限制导致扩展很艰难。<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li>维护的工具和资料有限，因为nosql是属于新的技术，不能和关系型数据库10几年的技术同日而语。</li>
</ul>
</li>
<li>不提供对sql的支持，如果不支持sql这样的工业标准，将产生一定用户的学习和使用成本。</li>
<li>不提供关系型数据库对事务的处理。</li>
</ul>
<h2 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h2><h3 id="非关系型数据库优势"><a href="#非关系型数据库优势" class="headerlink" title="非关系型数据库优势"></a>非关系型数据库优势</h3><ul>
<li>性能NOSQL是基于键值对的，可以想象成表中的主键和值的对应关系，而且不需要经过SQL层的解析，所以性能非常高。</li>
<li>可扩展性同样也是因为基于键值对，数据之间没有耦合性，所以非常容易水平扩展。</li>
</ul>
<h3 id="关系型数据库的优势"><a href="#关系型数据库的优势" class="headerlink" title="关系型数据库的优势"></a>关系型数据库的优势</h3><ul>
<li>复杂查询可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询。</li>
<li>事务支持使得对于安全性能很高的数据访问要求得以实现。对于这两类数据库，对方的优势就是自己的弱势，反之亦然。</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>关系型数据库与NoSQL数据库并非对立而是互补的关系，即通常情况下使用关系型数据库，在适合使用NoSQL的时候使用NoSQL数据库，<br>让NoSQL数据库对关系型数据库的不足进行弥补。<br>一般会将数据存储在关系型数据库中，在nosql数据库中备份存储关系型数据库的数据</p>
<h1 id="主流的NOSQL产品"><a href="#主流的NOSQL产品" class="headerlink" title="主流的NOSQL产品"></a>主流的NOSQL产品</h1><h2 id="键值-Key-Value-存储数据库"><a href="#键值-Key-Value-存储数据库" class="headerlink" title="键值(Key-Value)存储数据库"></a>键值(Key-Value)存储数据库</h2><p>相关产品： Tokyo Cabinet/Tyrant、Redis、Voldemort、Berkeley DB<br>典型应用： 内容缓存，主要用于处理大量数据的高访问负载。<br>数据模型： 一系列键值对<br>优势： 快速查询<br>劣势： 存储的数据缺少结构化</p>
<p>##　列存储数据库<br>相关产品：Cassandra, HBase, Riak<br>典型应用：分布式的文件系统<br>数据模型：以列簇式存储，将同一列数据存在一起<br>优势：查找速度快，可扩展性强，更容易进行分布式扩展<br>劣势：功能相对局限</p>
<h2 id="文档型数据库"><a href="#文档型数据库" class="headerlink" title="文档型数据库"></a>文档型数据库</h2><p>相关产品：CouchDB、MongoDB<br>典型应用：Web应用（与Key-Value类似，Value是结构化的）<br>数据模型： 一系列键值对<br>优势：数据结构要求不严格<br>劣势： 查询性能不高，而且缺乏统一的查询语法</p>
<p>##　图形(Graph)数据库<br>相关数据库：Neo4J、InfoGrid、Infinite Graph<br>典型应用：社交网络<br>数据模型：图结构<br>优势：利用图结构相关算法。<br>劣势：需要对整个图做计算才能得出结果，不容易做分布式的集群方案。</p>
<h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><p>##　概念</p>
<ul>
<li>Redis是一款高性能的NOSQL系列的非关系型数据库</li>
<li>Redis是用C语言开发的一个开源的高性能键值对（key-value）数据库，官方提供测试数据，50个并发执行100000个请求,读的速度是110000次/s,写的速度是81000次/s 。</li>
<li>Redis通过提供多种键值数据类型来适应不同场景下的存储需求，目前为止Redis支持的键值数据类型如下：<ul>
<li>字符串类型 string</li>
<li>哈希类型 hash</li>
<li>列表类型 list</li>
<li>集合类型 set</li>
<li>有序集合类型 sortedset<h2 id="redis的应用场景"><a href="#redis的应用场景" class="headerlink" title="redis的应用场景"></a>redis的应用场景</h2></li>
</ul>
</li>
<li>缓存（数据查询、短连接、新闻内容、商品内容等等）</li>
<li>聊天室的在线好友列表</li>
<li>任务队列。（秒杀、抢购、12306等等）</li>
<li>应用排行榜</li>
<li>网站访问统计</li>
<li>数据过期处理（可以精确到毫秒</li>
<li>分布式集群架构中的session分离<h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2></li>
<li>中文网：<a href="http://www.redis.net.cn/" target="_blank" rel="noopener">http://www.redis.net.cn/</a><ul>
<li>解压直接可以使用：<ul>
<li>redis.windows.conf：配置文件</li>
<li>redis-cli.exe：redis的客户端</li>
<li>redis-server.exe：redis服务器端<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2></li>
</ul>
</li>
</ul>
</li>
<li>Redis存储：key，value格式的数据<ul>
<li>key的数据类型：字符串</li>
<li>value的数据结构：<ul>
<li>字符串类型 string</li>
<li>哈希类型 hash （map格式）  </li>
<li>列表类型 list      （ Linkedlist格式，允许重复）</li>
<li>集合类型 set      （HashSet格式，不允许重复）</li>
<li>有序集合类型 sortedset    （不允许重复，且有序）<h2 id="命令操作"><a href="#命令操作" class="headerlink" title="命令操作"></a>命令操作</h2><h3 id="字符串类型-string"><a href="#字符串类型-string" class="headerlink" title="字符串类型 string"></a>字符串类型 string</h3></li>
</ul>
</li>
</ul>
</li>
<li>存储： <strong>set key value</strong></li>
<li>获取： <strong>get key</strong></li>
<li>删除： <strong>del key</strong></li>
</ul>
<h3 id="哈希类型-hash"><a href="#哈希类型-hash" class="headerlink" title="哈希类型 hash"></a>哈希类型 hash</h3><ul>
<li>存储： <strong>hset key field value</strong></li>
<li>获取指定的field对应的值：<strong>hget key field:</strong> </li>
<li>获取所有的field和value：<strong>hgetall key</strong></li>
<li>删除： <strong>hdel key field</strong></li>
</ul>
<h3 id="列表类型-list"><a href="#列表类型-list" class="headerlink" title="列表类型 list"></a>列表类型 list</h3><ul>
<li>将元素加入列表左边： <strong>lpush key value</strong></li>
<li>将元素加入列表右边：<strong>rpush key value</strong></li>
<li>范围获取：<strong>lrange key start end</strong> <ul>
<li>获取所有元素：lrange key 0 -1</li>
</ul>
</li>
<li>删除列表最左边的元素，并将元素返回：<strong>lpop key</strong></li>
<li>删除列表最右边的元素，并将元素返回：<strong>rpop key</strong></li>
</ul>
<h3 id="集合类型-set"><a href="#集合类型-set" class="headerlink" title="集合类型 set"></a>集合类型 set</h3><ul>
<li>set 集合 （ 不允许重复）<ul>
<li>存储：<strong>sadd key value</strong></li>
<li>获取set集合中所有元素：<strong>smembers key</strong></li>
<li>删除set集合中的某个元素：<strong>srem key value</strong></li>
</ul>
</li>
</ul>
<h3 id="有序集合类型-sortedset"><a href="#有序集合类型-sortedset" class="headerlink" title="有序集合类型 sortedset"></a>有序集合类型 sortedset</h3><ul>
<li>sortedset集合 <ul>
<li>不允许重复元素，且元素有顺序。</li>
<li>每个元素都会关联一个double类型的分数。</li>
<li>redis正是通过分数来为集合中的成员进行从小到大的排序。</li>
</ul>
</li>
<li>存储：<strong>zadd key score value</strong></li>
<li>获取：<strong>zrange key start end [withscores]</strong></li>
<li>删除：<strong>zrem key value</strong></li>
</ul>
<h3 id="通用命令"><a href="#通用命令" class="headerlink" title="通用命令"></a>通用命令</h3><ul>
<li>查询所有的键：keys *</li>
<li>获取键对应的value的类型：<strong>type key</strong></li>
<li>删除指定的key value：<strong>del key</strong></li>
</ul>
<h2 id="持久化机制"><a href="#持久化机制" class="headerlink" title="持久化机制"></a>持久化机制</h2><ul>
<li>Redis持久化<ul>
<li>Redis是一个内存数据库，当redis服务器重启，或者电脑重启，数据丢失时，我们可以将redis内存中的数据持久化，将其保存到硬盘的文件中。<h3 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h3></li>
</ul>
</li>
<li>默认持久化机制</li>
<li>在一定的间隔时间中，检测key的变化情况，然后持久化数据。<ul>
<li>修改 redis.windwos.conf 文件<ul>
<li><strong>save 900 1</strong>：after 900 sec (15 min) if at least 1 key changed</li>
<li><strong>save 300 10</strong>：after 300 sec (5 min) if at least 10 keys changed</li>
<li><strong>save 60 10000</strong>：after 60 sec if at least 10000 keys changed</li>
</ul>
</li>
<li>使用命令行，重新启动redis服务器，并指定配置文件名称<ul>
<li><strong>redis-server.exe   redis.windows.conf</strong>    </li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h3><ul>
<li>日志记录机制</li>
<li>记录每一条命令的操作。每一次命令操作后，持久化数据。</li>
<li>编辑 redis.windwos.conf 文件<ul>
<li>开启AOF<ul>
<li>appendonly no（关闭AOF）</li>
<li>ppendonly yes （开启AOF）</li>
</ul>
</li>
<li>取值<ul>
<li>appendfsync always ： 每一次操作都进行持久化</li>
<li>appendfsync everysec ： 每隔一秒进行一次持久化（默认）</li>
<li>appendfsync no： 不进行持久化</li>
</ul>
</li>
<li>使用命令行，重新启动redis服务器，并指定配置文件名称<ul>
<li><strong>redis-server.exe   redis.windows.conf</strong>    </li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="Jedis（Java客户端）"><a href="#Jedis（Java客户端）" class="headerlink" title="Jedis（Java客户端）"></a>Jedis（Java客户端）</h1><ul>
<li>Jedis:是一款java操作redis数据库的工具.<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2></li>
<li>下载jedis的jar包</li>
<li>使用<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取连接</span></span><br><span class="line">    Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">"localhost"</span>,<span class="number">6379</span>);</span><br><span class="line"><span class="comment">// 操作</span></span><br><span class="line">    jedis.set(<span class="string">"username"</span>,<span class="string">"zhangsan"</span>);</span><br><span class="line"><span class="comment">// 关闭连接</span></span><br><span class="line">    jedis.close();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="命令操作-1"><a href="#命令操作-1" class="headerlink" title="命令操作"></a>命令操作</h2><h3 id="字符串类型-string-1"><a href="#字符串类型-string-1" class="headerlink" title="字符串类型 string"></a>字符串类型 string</h3><ul>
<li>set</li>
<li>get<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="comment">/* 操作字符串String */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    Jedis jedis = <span class="keyword">new</span> Jedis(); <span class="comment">//空参构造，默认("localhost",6379)</span></span><br><span class="line">    <span class="comment">// 存储</span></span><br><span class="line">    jedis.set(<span class="string">"cat"</span>,<span class="string">"001"</span>);</span><br><span class="line">    <span class="comment">// 获取</span></span><br><span class="line">    String cat = jedis.get(<span class="string">"cat"</span>);</span><br><span class="line">    System.out.println(cat);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存储有时限的数据</span></span><br><span class="line">    jedis.setex(<span class="string">"dog"</span>,<span class="number">10</span>,<span class="string">"002"</span>); <span class="comment">// 时间单位：秒</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    jedis.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="哈希类型-hash-（-map格式-）"><a href="#哈希类型-hash-（-map格式-）" class="headerlink" title="哈希类型 hash （ map格式 ）"></a>哈希类型 hash （ map格式 ）</h3><ul>
<li>hset</li>
<li>hget</li>
<li>hgetAll<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> <span class="comment">/* 操作Hash */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    Jedis jedis = <span class="keyword">new</span> Jedis();</span><br><span class="line">    <span class="comment">// 存储</span></span><br><span class="line">    jedis.hset(<span class="string">"map"</span>,<span class="string">"cat"</span>,<span class="string">"111"</span>);</span><br><span class="line">    jedis.hset(<span class="string">"map"</span>,<span class="string">"dog"</span>,<span class="string">"222"</span>);</span><br><span class="line">    jedis.hset(<span class="string">"map"</span>,<span class="string">"rat"</span>,<span class="string">"333"</span>);</span><br><span class="line">    <span class="comment">// 获取</span></span><br><span class="line">    String cat = jedis.hget(<span class="string">"map"</span>, <span class="string">"cat"</span>);</span><br><span class="line">    System.out.println(cat);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取hash中的map中的所有数据</span></span><br><span class="line">    Map&lt;String, String&gt; map = jedis.hgetAll(<span class="string">"map"</span>);</span><br><span class="line">    <span class="comment">// 输出</span></span><br><span class="line">    Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">    <span class="keyword">for</span> (String s : keySet) &#123;</span><br><span class="line">        String value = map.get(s);</span><br><span class="line">        System.out.println(s+<span class="string">":"</span>+value);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    jedis.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="列表类型-list-（-LinkedList格式，允许重复）"><a href="#列表类型-list-（-LinkedList格式，允许重复）" class="headerlink" title="列表类型 list （ LinkedList格式，允许重复）"></a>列表类型 list （ LinkedList格式，允许重复）</h3><ul>
<li>lpush / rpush</li>
<li>lpop / rpop</li>
<li>lrange start end <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> <span class="comment">/* 操作List(允许重复) */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    Jedis jedis = <span class="keyword">new</span> Jedis();</span><br><span class="line">    <span class="comment">// 存储</span></span><br><span class="line">    jedis.lpush(<span class="string">"list"</span>,<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>);</span><br><span class="line">    jedis.rpush(<span class="string">"list"</span>,<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>);</span><br><span class="line">    <span class="comment">// 打印</span></span><br><span class="line">    List&lt;String&gt; list = jedis.lrange(<span class="string">"list"</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    System.out.println(list);</span><br><span class="line">    <span class="comment">// 弹出</span></span><br><span class="line">    String element1 = jedis.lpop(<span class="string">"list"</span>);</span><br><span class="line">    String element2 = jedis.lpop(<span class="string">"list"</span>);</span><br><span class="line">    <span class="comment">// 打印</span></span><br><span class="line">    System.out.println(element1);</span><br><span class="line">    System.out.println(element2);</span><br><span class="line">    List&lt;String&gt; list2 = jedis.lrange(<span class="string">"list"</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    System.out.println(list2);</span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    jedis.close();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="集合类型-set-（HashSet格式，-不允许重复）"><a href="#集合类型-set-（HashSet格式，-不允许重复）" class="headerlink" title="集合类型 set  （HashSet格式， 不允许重复）"></a>集合类型 set  （HashSet格式， 不允许重复）</h3><ul>
<li>sadd</li>
<li>smembers<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> <span class="comment">/* 操作Set(不允许重复) */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test05</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    Jedis jedis = <span class="keyword">new</span> Jedis();</span><br><span class="line">    <span class="comment">// 存储</span></span><br><span class="line">    jedis.sadd(<span class="string">"set"</span>,<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>,<span class="string">"D"</span>);</span><br><span class="line">    <span class="comment">// 获取</span></span><br><span class="line">    Set&lt;String&gt; set = jedis.smembers(<span class="string">"set"</span>);</span><br><span class="line">    <span class="comment">// 打印</span></span><br><span class="line">    System.out.println(set);</span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    jedis.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="有序集合类型-sortedset-1"><a href="#有序集合类型-sortedset-1" class="headerlink" title="有序集合类型 sortedset"></a>有序集合类型 sortedset</h3><ul>
<li>zadd</li>
<li>zrange<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> <span class="comment">/* 操作SortedSet(不允许重复，有序) */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test06</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    Jedis jedis = <span class="keyword">new</span> Jedis();</span><br><span class="line">    <span class="comment">// 存储</span></span><br><span class="line">    jedis.zadd(<span class="string">"sortedSet"</span>,<span class="number">1</span>,<span class="string">"cat"</span>);</span><br><span class="line">    jedis.zadd(<span class="string">"sortedSet"</span>,<span class="number">2</span>,<span class="string">"dog"</span>);</span><br><span class="line">    jedis.zadd(<span class="string">"sortedSet"</span>,<span class="number">3</span>,<span class="string">"rat"</span>);</span><br><span class="line">    <span class="comment">// 获取</span></span><br><span class="line">    Set&lt;String&gt; sortedSet = jedis.zrange(<span class="string">"sortedSet"</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// 打印</span></span><br><span class="line">    System.out.println(sortedSet);</span><br><span class="line">    <span class="comment">// 关闭连接</span></span><br><span class="line">    jedis.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="JedisPool（jedis连接池）"><a href="#JedisPool（jedis连接池）" class="headerlink" title="JedisPool（jedis连接池）"></a>JedisPool（jedis连接池）</h1><ul>
<li>快速入门<ul>
<li>创建JedisPool连接池对象</li>
<li>调用方法 getResource()方法获取Jedis连接<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建连接池配置对象</span></span><br><span class="line">    JedisPoolConfig jedisPoolConfig = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">    <span class="comment">// 设置配置</span></span><br><span class="line">    jedisPoolConfig.setMaxTotal(<span class="number">50</span>);</span><br><span class="line">    jedisPoolConfig.setMaxIdle(<span class="number">10</span>);</span><br><span class="line">    <span class="comment">// 创建连接池对象，并传入连接池配置对象</span></span><br><span class="line">    JedisPool jedisPool = <span class="keyword">new</span> JedisPool(jedisPoolConfig, <span class="string">"localhost"</span>, <span class="number">6379</span>);</span><br><span class="line">    <span class="comment">// 获取连接</span></span><br><span class="line">    Jedis resource = jedisPool.getResource();</span><br><span class="line">    <span class="comment">// 使用</span></span><br><span class="line">    resource.set(<span class="string">"name"</span>, <span class="string">"cat"</span>);</span><br><span class="line">    String s = resource.get(<span class="string">"name"</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">    <span class="comment">// 关闭，归还到连接池中</span></span><br><span class="line">    resource.close();</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="JedisPoolUtil工具类"><a href="#JedisPoolUtil工具类" class="headerlink" title="JedisPoolUtil工具类"></a>JedisPoolUtil工具类</h2><blockquote>
<p>设置 JedisPoolUtil工具类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisPoolUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 连接池对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 读取配置文件</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">// 创建properties对象</span></span><br><span class="line">        InputStream resourceAsStream = JedisPoolUtil.class.getClassLoader().getResourceAsStream(<span class="string">"jedis.properties"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 加载文佳</span></span><br><span class="line">            properties.load(resourceAsStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 创建连接池配置文件对象</span></span><br><span class="line">        JedisPoolConfig config = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">        <span class="comment">// 设置</span></span><br><span class="line">        config.setMaxTotal(Integer.parseInt(properties.getProperty(<span class="string">"maxTotal"</span>)));</span><br><span class="line">        config.setMaxIdle(Integer.parseInt(properties.getProperty(<span class="string">"maxIdle"</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化连接池对象</span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> JedisPool(config,properties.getProperty(<span class="string">"host"</span>),Integer.parseInt(properties.getProperty(<span class="string">"port"</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title">getJedis</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>设置之后的操作，简化了很多</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisPoolUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 连接池对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 读取配置文件</span></span><br><span class="line">        Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">// 创建properties对象</span></span><br><span class="line">        InputStream resourceAsStream = JedisPoolUtil.class.getClassLoader().getResourceAsStream(<span class="string">"jedis.properties"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 加载文佳</span></span><br><span class="line">            properties.load(resourceAsStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 创建连接池配置文件对象</span></span><br><span class="line">        JedisPoolConfig config = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">        <span class="comment">// 设置</span></span><br><span class="line">        config.setMaxTotal(Integer.parseInt(properties.getProperty(<span class="string">"maxTotal"</span>)));</span><br><span class="line">        config.setMaxIdle(Integer.parseInt(properties.getProperty(<span class="string">"maxIdle"</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 初始化连接池对象</span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> JedisPool(config,properties.getProperty(<span class="string">"host"</span>),Integer.parseInt(properties.getProperty(<span class="string">"port"</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title">getJedis</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    </p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/20/Json/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/20/Json/" class="post-title-link" itemprop="url">JSON</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-20 21:15:02" itemprop="dateCreated datePublished" datetime="2019-07-20T21:15:02+08:00">2019-07-20</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-22 16:03:20" itemprop="dateModified" datetime="2019-07-22T16:03:20+08:00">2019-07-22</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">3.4k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">3 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><ul>
<li>JSON：JavaScript 对象表示法（JavaScript Object Notation）</li>
<li>JSON现在多用于存储和交换文本信息的语法，进行数据的传输。</li>
<li>JSON 比 XML 更小、更快，更易解析。</li>
<li>注意：JSON 虽然使用 JavaScript 语法来描述数据对象，但是 JSON 仍然独立于语言和平台。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"employees"</span>: [</span><br><span class="line">    &#123; <span class="string">"firstName"</span>:<span class="string">"Bill"</span> , <span class="string">"lastName"</span>:<span class="string">"Gates"</span> &#125;,</span><br><span class="line">    &#123; <span class="string">"firstName"</span>:<span class="string">"George"</span> , <span class="string">"lastName"</span>:<span class="string">"Bush"</span> &#125;,</span><br><span class="line">    &#123; <span class="string">"firstName"</span>:<span class="string">"Thomas"</span> , <span class="string">"lastName"</span>:<span class="string">"Carter"</span> &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h1><h2 id="类似-XML"><a href="#类似-XML" class="headerlink" title="类似 XML"></a>类似 XML</h2><ul>
<li>JSON 是纯文本</li>
<li>JSON 具有“自我描述性”（人类可读）</li>
<li>JSON 具有层级结构（值中存在值）</li>
<li>JSON 可通过 JavaScript 进行解析</li>
<li>JSON 数据可使用 AJAX 进行传输<h2 id="相比-XML-的不同之处"><a href="#相比-XML-的不同之处" class="headerlink" title="相比 XML 的不同之处"></a>相比 XML 的不同之处</h2></li>
<li>没有结束标签</li>
<li>更短</li>
<li>读写的速度更快</li>
<li>能够使用内建的 JavaScript eval() 方法进行解析</li>
<li>使用数组</li>
<li>不使用保留字<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2></li>
<li>对于 AJAX 应用程序来说，JSON 比 XML 更快更易使用：<ul>
<li>使用 XML<ul>
<li>读取 XML 文档</li>
<li>使用 XML DOM 来循环遍历文档</li>
<li>读取值并存储在变量中</li>
</ul>
</li>
<li>使用 JSON<ul>
<li>读取 JSON 字符串</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><ul>
<li>JSON 语法是 JavaScript 语法的子集。<h2 id="语法规则"><a href="#语法规则" class="headerlink" title="语法规则"></a>语法规则</h2></li>
<li>JSON 语法是 JavaScript 对象表示法语法的子集。</li>
<li>数据在名称/值对中</li>
<li>数据由逗号分隔</li>
<li>花括号保存对象</li>
<li>方括号保存数组<h2 id="名称-值对"><a href="#名称-值对" class="headerlink" title="名称/值对"></a>名称/值对</h2>JSON 数据的书写格式是：名称/值对。<br>名称/值对包括字段名称（在双引号中），后面写一个冒号，然后是值：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"firstName"</span> : <span class="string">"John"</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="值"><a href="#值" class="headerlink" title="值"></a>值</h2><ol>
<li>数字（整数或浮点数）</li>
<li>字符串（在双引号中）</li>
<li>逻辑值（true 或 false）</li>
<li>数组（在方括号中）    {“persons”:[{},{}]}</li>
<li>对象（在花括号中）   { “firstName”:”John” , “lastName”:”Doe” }</li>
<li>null<h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2></li>
</ol>
<ul>
<li>JSON 文件的文件类型是 “.json”</li>
<li>JSON 文本的 MIME 类型是 “application/json”</li>
</ul>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h2><ol>
<li>json对象.键名</li>
<li>json对象[“键名”]</li>
<li>数组对象[索引]</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/* 基本格式 */</span></span><br><span class="line"> <span class="keyword">var</span> person = &#123;<span class="string">"name"</span>:<span class="string">"cat"</span>,<span class="string">"age"</span>:<span class="number">11</span>&#125;</span><br><span class="line"> <span class="keyword">var</span> name11 = person.name;</span><br><span class="line"> <span class="keyword">var</span> name12 = person[<span class="string">"name"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 嵌套格式 */</span></span><br><span class="line"> <span class="comment">//   JSON &#123; JSON,JASON &#125;</span></span><br><span class="line"> <span class="keyword">var</span> persons = &#123;</span><br><span class="line">     <span class="string">"personCat"</span>: &#123;<span class="string">"name"</span>:<span class="string">"cat"</span>,<span class="string">"age"</span>:<span class="number">11</span>&#125;,</span><br><span class="line">     <span class="string">"personDog"</span>:&#123;<span class="string">"name"</span>:<span class="string">"dog"</span>,<span class="string">"age"</span>:<span class="number">12</span>&#125;,</span><br><span class="line">     <span class="string">"personRat"</span>:&#123;<span class="string">"name"</span>:<span class="string">"rat"</span>,<span class="string">"age"</span>:<span class="number">13</span>&#125;&#125;</span><br><span class="line"> <span class="keyword">var</span> personCat = persons.personCat;</span><br><span class="line"> <span class="keyword">var</span> name2 = persons.personCat.name;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//   Array [JSON,JASON]</span></span><br><span class="line"> <span class="keyword">var</span> array = [</span><br><span class="line">     &#123;<span class="string">"name"</span>:<span class="string">"cat"</span>,<span class="string">"age"</span>:<span class="number">11</span>&#125;,</span><br><span class="line">     &#123;<span class="string">"name"</span>:<span class="string">"dog"</span>,<span class="string">"age"</span>:<span class="number">12</span>&#125;,</span><br><span class="line">     &#123;<span class="string">"name"</span>:<span class="string">"rat"</span>,<span class="string">"age"</span>:<span class="number">13</span>&#125;]</span><br><span class="line"> <span class="keyword">var</span> name3 = array[<span class="number">0</span>].name;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//   JSON &#123; Array[JSON,JASON], Array[JSON,JASON] &#125;</span></span><br><span class="line"> <span class="keyword">var</span> persons = &#123;</span><br><span class="line">     <span class="string">"person1"</span>:[</span><br><span class="line">         &#123;<span class="string">"name"</span>:<span class="string">"cat"</span>,<span class="string">"age"</span>:<span class="number">11</span>&#125;,</span><br><span class="line">         &#123;<span class="string">"name"</span>:<span class="string">"dog"</span>,<span class="string">"age"</span>:<span class="number">12</span>&#125;,</span><br><span class="line">         &#123;<span class="string">"name"</span>:<span class="string">"rat"</span>,<span class="string">"age"</span>:<span class="number">13</span>&#125;,],</span><br><span class="line">     <span class="string">"person2"</span>:[</span><br><span class="line">         &#123;<span class="string">"name"</span>:<span class="string">"cat"</span>,<span class="string">"age"</span>:<span class="number">11</span>&#125;,</span><br><span class="line">         &#123;<span class="string">"name"</span>:<span class="string">"dog"</span>,<span class="string">"age"</span>:<span class="number">12</span>&#125;,</span><br><span class="line">         &#123;<span class="string">"name"</span>:<span class="string">"rat"</span>,<span class="string">"age"</span>:<span class="number">13</span>&#125;,]</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">var</span> name4 = persons.person1[<span class="number">0</span>].name;</span><br></pre></td></tr></table></figure>

<h2 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 基本格式 */</span></span><br><span class="line">  <span class="keyword">var</span> person = &#123;<span class="string">"name"</span>:<span class="string">"cat"</span>,<span class="string">"age"</span>:<span class="number">11</span>&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> person) &#123;</span><br><span class="line">      <span class="comment">// * key默认为字符串</span></span><br><span class="line">      alert(key);</span><br><span class="line">      alert(person.key); <span class="comment">// * person."name"; 无法获取</span></span><br><span class="line">      alert(person[key]); <span class="comment">// * person["name"]; 无法获取</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 嵌套格式 */</span></span><br><span class="line">  <span class="keyword">var</span> array = [</span><br><span class="line">      &#123;<span class="string">"name"</span>:<span class="string">"cat"</span>,<span class="string">"age"</span>:<span class="number">11</span>&#125;,</span><br><span class="line">      &#123;<span class="string">"name"</span>:<span class="string">"dog"</span>,<span class="string">"age"</span>:<span class="number">12</span>&#125;,</span><br><span class="line">      &#123;<span class="string">"name"</span>:<span class="string">"rat"</span>,<span class="string">"age"</span>:<span class="number">13</span>&#125;]</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i =<span class="number">0</span>;i&lt;array.length;i++) &#123;</span><br><span class="line">      <span class="keyword">var</span> p = array[i];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> p) &#123;</span><br><span class="line">          alert(key);</span><br><span class="line">          alert(p[key]);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h1 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h1><ul>
<li>转换<ul>
<li>由于JSON对象的特性，在实际操作中，我们通过JSON对象代替Java对象在数据中的传输。所以，我们需要学习JSON对象和Java对象的相互转换。</li>
</ul>
</li>
<li>JSON解析器<ul>
<li>常见的解析器：Jsonlib，Gson，fastjson，jackson</li>
</ul>
</li>
</ul>
<h2 id="JSON转为Java对象"><a href="#JSON转为Java对象" class="headerlink" title="JSON转为Java对象"></a>JSON转为Java对象</h2><ul>
<li>导入jackson的相关jar包</li>
<li>创建Jackson核心对象 ObjectMapper</li>
<li>调用ObjectMapper的相关方法进行转换<ul>
<li>readValue(json字符串数据,Class)<h2 id="Java对象转换JSON"><a href="#Java对象转换JSON" class="headerlink" title="Java对象转换JSON"></a>Java对象转换JSON</h2></li>
</ul>
</li>
<li>导入jackson的相关jar包</li>
<li>创建Jackson核心对象 ObjectMapper</li>
<li>调用ObjectMapper的相关方法进行转换<ul>
<li>writeValue(参数1，obj)<ul>
<li>File：将obj对象转换为JSON字符串，并保存到指定的文件中。</li>
<li>Writer：将obj对象转换为JSON字符串，并将json数据填充到字符输出流中。</li>
<li>OutputStream：将obj对象转换为JSON字符串，并将json数据填充到字节输出流中。</li>
</ul>
</li>
<li>writeValueAsString(obj)<ul>
<li>将对象转为json字符串</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><ul>
<li>@JsonIgnore：排除属性。</li>
<li>@JsonFormat：属性值得格式化<ul>
<li>@JsonFormat(pattern = “yyyy-MM-dd”)</li>
</ul>
</li>
</ul>
<h2 id="复杂java对象转换"><a href="#复杂java对象转换" class="headerlink" title="复杂java对象转换"></a>复杂java对象转换</h2><ol>
<li>List：数组</li>
<li>Map：对象格式一致</li>
</ol>
<h2 id="格式问题"><a href="#格式问题" class="headerlink" title="格式问题"></a>格式问题</h2><ul>
<li>服务器响应的数据，在客户端使用时，要想当做json数据格式使用。<ul>
<li>在浏览器端设置$.ajax属性<ul>
<li>$.get(type):将最后一个参数type指定为”json”</li>
</ul>
</li>
<li>在服务器端设置MIME类型<ul>
<li>response.setContentType(“application/json;charset=utf-8”);</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/20/Ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/20/Ajax/" class="post-title-link" itemprop="url">Ajax</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-20 17:18:33" itemprop="dateCreated datePublished" datetime="2019-07-20T17:18:33+08:00">2019-07-20</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-22 15:46:17" itemprop="dateModified" datetime="2019-07-22T15:46:17+08:00">2019-07-22</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">2.4k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">2 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><ul>
<li>AJAX 是与服务器交换数据的艺术，它在不重载全部页面的情况下，实现了对部分网页的更新。</li>
<li>AJAX = 异步 JavaScript 和 XML（Asynchronous JavaScript and XML）。</li>
<li>Ajax 是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。<ul>
<li>通过在后台与服务器进行少量数据交换，Ajax 可以使网页实现异步更新。</li>
<li>这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</li>
<li>传统的网页（不使用 Ajax）如果需要更新内容，必须重载整个网页页面。</li>
</ul>
</li>
</ul>
<h2 id="异步和同步"><a href="#异步和同步" class="headerlink" title="异步和同步"></a>异步和同步</h2><ul>
<li>同步<ul>
<li>客户端和服务器端相互通信的基础上，客户端必须等待服务器端的响应。</li>
<li>在等待的期间客户端不能做其他操作。</li>
</ul>
</li>
<li>异步<ul>
<li>客户端和服务器端相互通信的基础上，客户端不需要等待服务器端的响应。</li>
<li>在服务器处理请求的过程中，客户端可以进行其他的操作。</li>
</ul>
</li>
</ul>
<h1 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h1><h2 id="JS实现方式（了解）"><a href="#JS实现方式（了解）" class="headerlink" title="JS实现方式（了解）"></a>JS实现方式（了解）</h2><ul>
<li>如果没有 jQuery，AJAX 编程还是有些难度的。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 发送异步请求 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.创建对象</span></span><br><span class="line">    <span class="keyword">var</span> xmlhttp;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest)&#123;</span><br><span class="line">        <span class="comment">//  IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码</span></span><br><span class="line">        xmlhttp=<span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// IE6, IE5 浏览器执行代码</span></span><br><span class="line">        xmlhttp=<span class="keyword">new</span> ActiveXObject(<span class="string">"Microsoft.XMLHTTP"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">// 2.建立连接</span></span><br><span class="line"><span class="comment">//  * 请求方式：GET/POST</span></span><br><span class="line"><span class="comment">//  * 请求的URL</span></span><br><span class="line"><span class="comment">//  * 同步或异步请求：true（异步）、false（同步）</span></span><br><span class="line">	xmlhttp.open(<span class="string">"GET"</span>,<span class="string">"/ajaxServlet?fname=Henry&amp;lname=Ford"</span>,<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 3.发送请求</span></span><br><span class="line">	xmlhttp.send();</span><br><span class="line">    <span class="comment">//  POST方式</span></span><br><span class="line">    <span class="comment">// xmlhttp.open("POST","/ajaxServlet",true);</span></span><br><span class="line">    <span class="comment">// xmlhttp.send("fname=Henry&amp;lname=Ford");</span></span><br><span class="line"><span class="comment">// 4.接受并处理来自服务器的相应结果</span></span><br><span class="line"><span class="comment">//  判断服务器是否成功响应</span></span><br><span class="line">	xmlhttp.onreadystatechange=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// readyState：就绪状态</span></span><br><span class="line">    <span class="comment">// status：响应状态码</span></span><br><span class="line">    <span class="keyword">if</span> (xmlhttp.readyState==<span class="number">4</span> &amp;&amp; xmlhttp.status==<span class="number">200</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// responseText：响应结果</span></span><br><span class="line">        <span class="keyword">var</span> responseText = xmlhttp.responseText;</span><br><span class="line">        alert(responseText);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="JQeury实现方式"><a href="#JQeury实现方式" class="headerlink" title="JQeury实现方式"></a>JQeury实现方式</h2><ul>
<li>通过 jQuery AJAX 方法，能够使用 HTTP Get 和 HTTP Post 从远程服务器上请求文本、HTML、XML 或 JSON </li>
<li>同时能够把这些外部数据直接载入网页的被选元素中。<h2 id="ajax"><a href="#ajax" class="headerlink" title="$.ajax()"></a>$.ajax()</h2></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">   <span class="comment">// url：请求路径</span></span><br><span class="line">   url:<span class="string">"/ajaxServlet"</span>,</span><br><span class="line">   <span class="comment">// type：请求方式</span></span><br><span class="line">   type:<span class="string">"POST"</span>,</span><br><span class="line">   <span class="comment">// data：请求参数</span></span><br><span class="line">   <span class="comment">// data:"fname=Henry&amp;lname=Ford",</span></span><br><span class="line">   data:&#123;<span class="string">"fname"</span>:<span class="string">"Henry"</span>,<span class="string">"lname"</span>:<span class="string">"Ford"</span>&#125;, <span class="comment">// Json方式</span></span><br><span class="line"><span class="comment">// success：响应成功后的回调函数</span></span><br><span class="line">           success:<span class="function"><span class="keyword">function</span> (<span class="params">responseData</span>) </span>&#123;</span><br><span class="line">               alert(responseData);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// error：响应错误后的回调函数</span></span><br><span class="line">error:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">               alert(<span class="string">"出错了!"</span>);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="comment">// dateType：设置接受到的响应数据的格式</span></span><br><span class="line">           dataType:<span class="string">"text"</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="get"><a href="#get" class="headerlink" title="$.get()"></a>$.get()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> $.<span class="keyword">get</span>(</span><br><span class="line">    // url：请求路径</span><br><span class="line">    "/ajaxServlet",</span><br><span class="line">    // data：请求参数</span><br><span class="line">    &#123;<span class="string">"fname"</span>:<span class="string">"Henry"</span>,<span class="string">"lname"</span>:<span class="string">"Ford"</span>&#125;,</span><br><span class="line">    <span class="comment">// success：响应成功后的回调函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">data,status</span>)</span>&#123;</span><br><span class="line">    	alert(<span class="string">"数据: "</span> + data + <span class="string">"\n状态: "</span> + status);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// dateType：设置接受到的响应数据的格式</span></span><br><span class="line">    <span class="string">"text"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="post"><a href="#post" class="headerlink" title="$.post()"></a>$.post()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.post(</span><br><span class="line">    <span class="comment">// url：请求路径</span></span><br><span class="line">    <span class="string">"/ajaxServlet"</span>,</span><br><span class="line">    <span class="comment">// data：请求参数</span></span><br><span class="line">    &#123;<span class="string">"fname"</span>:<span class="string">"Henry"</span>,<span class="string">"lname"</span>:<span class="string">"Ford"</span>&#125;,</span><br><span class="line">    <span class="comment">// success：响应成功后的回调函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params">data,status</span>)</span>&#123;</span><br><span class="line">    	alert(<span class="string">"数据: "</span> + data + <span class="string">"\n状态: "</span> + status);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// dateType：设置接受到的响应数据的格式</span></span><br><span class="line">    <span class="string">"text"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/19/jQuery/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/19/jQuery/" class="post-title-link" itemprop="url">jQuery</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-19 01:36:24" itemprop="dateCreated datePublished" datetime="2019-07-19T01:36:24+08:00">2019-07-19</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-22 15:36:14" itemprop="dateModified" datetime="2019-07-22T15:36:14+08:00">2019-07-22</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">9.7k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">9 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul>
<li>jQuery是一个快速、简洁的JavaScript框架，是继Prototype之后又一个优秀的JavaScript代码库（或JavaScript框架）。</li>
<li>jQuery设计的宗旨是“write Less，Do More”，即倡导写更少的代码，做更多的事情。</li>
<li>jQuery封装了JavaScript常用的功能代码，提供一种简便的JavaScript设计模式，优化HTML文档操作、事件处理、动画设计和Ajax交互。</li>
<li>jQuery本质上就是一些js文件，封装了js的原生代码而已。</li>
<li>jQuery 语法是为 HTML 元素的选取编制的，可以对元素执行某些操作。</li>
</ul>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ol>
<li>下载JQuery<ul>
<li>目前jQuery有三个大版本<ul>
<li>1.x<ul>
<li>兼容ie678,使用最为广泛的，官方只做BUG维护，</li>
<li>功能不再新增。因此一般项目来说，使用1.x版本就可以了。</li>
</ul>
</li>
<li>2.x<ul>
<li>不兼容ie678，很少有人使用，官方只做BUG维护，</li>
<li>功能不再新增。如果不考虑兼容低版本的浏览器可以使用2.x。</li>
</ul>
</li>
<li>3.x<ul>
<li>不兼容ie678，只支持最新的浏览器。</li>
<li>除非特殊要求，一般不会使用3.x版本的，因为很多老的jQuery插件不支持这个版本。</li>
<li>目前该版本是官方主要更新维护的版本。</li>
</ul>
</li>
</ul>
</li>
<li>每个大版本包括两个小版本<ul>
<li>jquery.js<ul>
<li>Development version（开发版本） - 用于测试和开发。</li>
<li>给程序员看的，有良好的缩进和注释，体积大一些，程序加载较慢。</li>
</ul>
</li>
<li>jquery.min.js<ul>
<li>Production version（生产版本）- 用于实际的网站中，已被精简和压缩。</li>
<li>在程序中使用，没有缩进，体积小一些，程序加载更快。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>导入JQuery的js文件</li>
<li>引入Jquery资源<ul>
<li>请注意，&lt;script&gt; 标签应该位于页面的 &lt;head&gt; 部分。<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><ul>
<li><strong>$(selector).action()</strong><ul>
<li>美元符号定义 jQuery</li>
<li>选择符（selector）“查询”和“查找” HTML 元素</li>
<li>jQuery 的 action() 执行对元素的操作<h2 id="文档就绪函数"><a href="#文档就绪函数" class="headerlink" title="文档就绪函数"></a>文档就绪函数</h2></li>
</ul>
</li>
<li>这是为了防止文档在完全加载（就绪）之前运行 jQuery 代码。</li>
<li>如果在文档没有完全加载之前就运行函数，操作可能失败。<ul>
<li>试图隐藏一个不存在的元素</li>
<li>获得未完全加载的图像的大小 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 完全体 */</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 简化版 */</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h1 id="转换"><a href="#转换" class="headerlink" title="转换"></a>转换</h1><ol>
<li>JQuery对象在操作时，更加方便。</li>
<li>JQuery对象和js对象方法不通用</li>
<li>两者相互转换<ul>
<li>Jquery – &gt; JS <ul>
<li>Jquery对象[索引]</li>
<li>Jquery对象.get(索引)</li>
</ul>
</li>
<li>JS – &gt; Jquery <ul>
<li>$(JS对象)</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h1><ul>
<li>jQuery选择器允许您对元素组或单个元素进行操作。<ul>
<li>jQuery 元素选择器和属性选择器允许您通过标签名、属性名或内容对 HTML 元素进行选择。</li>
<li>jQuery选择器允许您对 HTML 元素组或单个元素进行操作。</li>
<li>在 HTML DOM 术语中：jQuery选择器允许您对 DOM 元素组或单个 DOM 节点进行操作。</li>
</ul>
</li>
</ul>
<h2 id="基本选择器"><a href="#基本选择器" class="headerlink" title="基本选择器"></a>基本选择器</h2><table>
<thead>
<tr>
<th align="center">选择器</th>
<th>实例</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">*</td>
<td>$(“*”)</td>
<td>所有元素</td>
</tr>
<tr>
<td align="center">this</td>
<td>$(this)</td>
<td>当前 HTML 元素</td>
</tr>
<tr>
<td align="center">#id</td>
<td>$(“#lastname”)</td>
<td>id=”lastname” 的元素</td>
</tr>
<tr>
<td align="center">.class</td>
<td>$(“.intro”)</td>
<td>所有 class=”intro” 的元素</td>
</tr>
<tr>
<td align="center">.class.class</td>
<td>$(“.intro.demo”)</td>
<td>所有 class=”intro” 且 class=”demo” 的元素</td>
</tr>
<tr>
<td align="center">element</td>
<td>$(“p”)</td>
<td>所有 &lt;p&gt; 元素</td>
</tr>
<tr>
<td align="center">element.class</td>
<td>$(“p.intro”)</td>
<td>所有 class=”intro” 的 &lt;p&gt; 元素</td>
</tr>
<tr>
<td align="center">element#id</td>
<td>$(“p#demo”)</td>
<td>所有 id=”demo” 的 &lt;p&gt; 元素。</td>
</tr>
<tr>
<td align="center"></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">s1,s2,s3</td>
<td>$(“th,td,.intro”)</td>
<td>所有带有匹配选择的元素</td>
</tr>
</tbody></table>
<h2 id="层级选择器"><a href="#层级选择器" class="headerlink" title="层级选择器"></a>层级选择器</h2><table>
<thead>
<tr>
<th align="center">选择器</th>
<th>实例</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">super sub</td>
<td>$(“table tr”)</td>
<td>选择 &lt;table&gt;元素内部的所有 &lt;tr&gt;元素（不仅是子元素）</td>
</tr>
<tr>
<td align="center">super &gt; sub</td>
<td>$(“table &gt; tr”)</td>
<td>选择 &lt;table&gt;元素内部的所有 &lt;tr&gt;子元素</td>
</tr>
<tr>
<td align="center">## 属性选择器</td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">- jQuery 使用 XPath 表达式来选择带有给定属性的元素。</td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">选择器</td>
<td>实例</td>
<td>描述</td>
</tr>
<tr>
<td align="center">:—:</td>
<td>—–</td>
<td>—–</td>
</tr>
<tr>
<td align="center">[atribute]</td>
<td>$(“[href]”)</td>
<td>所有带有 href 属性的元素</td>
</tr>
<tr>
<td align="center">[[<em>attribute</em> = <em>value</em>]]</td>
<td>$(“[href=’#’]”)</td>
<td>所有 href 属性的值等于 “#” 的元素</td>
</tr>
<tr>
<td align="center">[[<em>attribute</em> != <em>value</em>]]</td>
<td>$(“[href!=’#’]”)</td>
<td>所有 href 属性的值不等于 “#” 的元素</td>
</tr>
<tr>
<td align="center">[[<em>attribute *$= *value</em>]]</td>
<td>$(“[href$=’.jpg’]”)</td>
<td>所有 href 属性的值包含以 “.jpg” 结尾的元素</td>
</tr>
</tbody></table>
<h2 id="过滤选择器"><a href="#过滤选择器" class="headerlink" title="过滤选择器"></a>过滤选择器</h2><table>
<thead>
<tr>
<th align="center">选择器</th>
<th>实例</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">[:first]</td>
<td>$(“p:first”)</td>
<td>第一个 &lt;p&gt; 元素</td>
</tr>
<tr>
<td align="center">[:last]</td>
<td>$(“p:last”)</td>
<td>最后一个 &lt;p&gt; 元素</td>
</tr>
<tr>
<td align="center">[:even]</td>
<td>$(“tr:even”)</td>
<td>所有偶数 &lt;tr&gt; 元素</td>
</tr>
<tr>
<td align="center">[:odd]</td>
<td>$(“tr:odd”)</td>
<td>所有奇数 &lt;tr&gt; 元素</td>
</tr>
<tr>
<td align="center"></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">[:eq(<em>index</em>)]</td>
<td>$(“ul li:eq(3)”)</td>
<td>列表中的第四个元素（index 从 0 开始）</td>
</tr>
<tr>
<td align="center">[:gt(<em>no</em>)]</td>
<td>$(“ul li:gt(3)”)</td>
<td>列出 index 大于 3 的元素</td>
</tr>
<tr>
<td align="center">[:lt(<em>no</em>)]</td>
<td>$(“ul li:lt(3)”)</td>
<td>列出 index 小于 3 的元素</td>
</tr>
<tr>
<td align="center"></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">[:empty]</td>
<td>$(“:empty”)</td>
<td>无子（元素）节点的所有元素</td>
</tr>
<tr>
<td align="center">:not(<em>selector</em>)</td>
<td>$(“input:not(:empty)”)</td>
<td>所有不为空的 input 元素</td>
</tr>
<tr>
<td align="center">[:header]</td>
<td>$(“:header”)</td>
<td>所有标题元素 &lt;h1&gt; - &lt;h6&gt;</td>
</tr>
<tr>
<td align="center">[:contains(<em>text</em>)]</td>
<td>$(“:contains(‘W3School’)”)</td>
<td>包含指定字符串的所有元素</td>
</tr>
<tr>
<td align="center"></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">:hidden</td>
<td>$(“p:hidden”)</td>
<td>所有隐藏的 &lt;p&gt; 元素</td>
</tr>
<tr>
<td align="center">[:visible]</td>
<td>$(“table:visible”)</td>
<td>所有可见的表格</td>
</tr>
</tbody></table>
<h2 id="表单过滤选择器"><a href="#表单过滤选择器" class="headerlink" title="表单过滤选择器"></a>表单过滤选择器</h2><table>
<thead>
<tr>
<th align="center">选择器</th>
<th>实例</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">[:input]</td>
<td>$(“:input”)</td>
<td>所有 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:text]</td>
<td>$(“:text”)</td>
<td>所有 type=”text” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:password]</td>
<td>$(“:password”)</td>
<td>所有 type=”password” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:radio]</td>
<td>$(“:radio”)</td>
<td>所有 type=”radio” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:checkbox]</td>
<td>$(“:checkbox”)</td>
<td>所有 type=”checkbox” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:submit]</td>
<td>$(“:submit”)</td>
<td>所有 type=”submit” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:reset]</td>
<td>$(“:reset”)</td>
<td>所有 type=”reset” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:button]</td>
<td>$(“:button”)</td>
<td>所有 type=”button” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:image]</td>
<td>$(“:image”)</td>
<td>所有 type=”image” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center">[:file]</td>
<td>$(“:file”)</td>
<td>所有 type=”file” 的 &lt;input&gt; 元素</td>
</tr>
<tr>
<td align="center"></td>
<td></td>
<td></td>
</tr>
<tr>
<td align="center">[:enabled]</td>
<td>$(“:enabled”)</td>
<td>所有激活的 input 元素</td>
</tr>
<tr>
<td align="center">[:disabled]</td>
<td>$(“:disabled”)</td>
<td>所有禁用的 input 元素</td>
</tr>
<tr>
<td align="center">[:selected]</td>
<td>$(“:selected”)</td>
<td>所有被选取的 input 元素</td>
</tr>
<tr>
<td align="center">[:checked]</td>
<td>$(“:checked”)</td>
<td>所有被选中的 input 元素</td>
</tr>
</tbody></table>
<h1 id="事件函数"><a href="#事件函数" class="headerlink" title="事件函数"></a>事件函数</h1><ul>
<li>jQuery 事件处理方法是 jQuery 中的核心函数。<ul>
<li>事件处理程序指的是当 HTML 中发生某些事件时所调用的方法。</li>
<li>术语由事件“触发”（或“激发”）经常会被使用。</li>
</ul>
</li>
<li>如果你的网站包含许多页面，为了让 jQuery 函数易于维护，需要将  jQuery 函数放到独立的 .js 文件中。<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入Jquery资源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 引入独立的js文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"my_jquery_functions.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h2><table>
<thead>
<tr>
<th>事件</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td>click</td>
<td align="center">当单击元素时</td>
</tr>
<tr>
<td>dbclick</td>
<td align="center">当双击元素时</td>
</tr>
<tr>
<td>mouseenter</td>
<td align="center">当鼠标指针穿过（进入）被选元素时</td>
</tr>
<tr>
<td>mouseleave</td>
<td align="center">当鼠标指针离开被选元素时</td>
</tr>
<tr>
<td>hover</td>
<td align="center">当鼠标指针悬停在被选元素上时</td>
</tr>
<tr>
<td>## 键盘事件</td>
<td align="center"></td>
</tr>
<tr>
<td>事件</td>
<td align="center">描述</td>
</tr>
<tr>
<td>—–</td>
<td align="center">:—:</td>
</tr>
<tr>
<td>keydown</td>
<td align="center">键按下的过程</td>
</tr>
<tr>
<td>keypress</td>
<td align="center">键被按下</td>
</tr>
<tr>
<td>keyup</td>
<td align="center">键被松开</td>
</tr>
<tr>
<td>## 表单事件</td>
<td align="center"></td>
</tr>
<tr>
<td>事件</td>
<td align="center">描述</td>
</tr>
<tr>
<td>—–</td>
<td align="center">:—:</td>
</tr>
<tr>
<td>submit</td>
<td align="center">当提交表单时</td>
</tr>
<tr>
<td>change</td>
<td align="center">当元素的值改变时发生 change 事件<br>（仅适用于表单字段）</td>
</tr>
<tr>
<td>focus</td>
<td align="center">当元素获得焦点时<br>（当通过鼠标点击选中元素或通过 tab 键定位到元素时）</td>
</tr>
<tr>
<td>blur</td>
<td align="center">当元素失去焦点时</td>
</tr>
<tr>
<td>## 窗口事件</td>
<td align="center"></td>
</tr>
<tr>
<td>事件</td>
<td align="center">描述</td>
</tr>
<tr>
<td>—–</td>
<td align="center">:—:</td>
</tr>
<tr>
<td>resize</td>
<td align="center">当调整浏览器窗口大小时</td>
</tr>
<tr>
<td>scroll</td>
<td align="center">当用户滚动指定的元素时</td>
</tr>
</tbody></table>
<h1 id="DOM操作"><a href="#DOM操作" class="headerlink" title="DOM操作"></a>DOM操作</h1><ul>
<li>jQuery 中非常重要的部分，就是操作 DOM 的能力。</li>
<li>jQuery 提供一系列与 DOM 相关的方法，这使访问和操作元素和属性变得很容易。<ul>
<li>提示：DOM = Document Object Model（文档对象模型）<h2 id="内容操作方法"><a href="#内容操作方法" class="headerlink" title="内容操作方法"></a>内容操作方法</h2></li>
</ul>
</li>
<li><strong>html()</strong><ul>
<li>获取/设置元素的标签体内容（包括 HTML 标记）</li>
</ul>
</li>
<li><strong>text()</strong><ul>
<li>获取/设置元素的标签体纯文本内容</li>
</ul>
</li>
<li><strong>val()</strong><ul>
<li>获取/设置元素的value属性值<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#btn1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#test1"</span>).text(<span class="string">"Hello world!"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">"#btn2"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#test2"</span>).html(<span class="string">"&lt;b&gt;Hello world!&lt;/b&gt;"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">"#btn3"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#test3"</span>).val(<span class="string">"Dolly Duck"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="属性操作方法"><a href="#属性操作方法" class="headerlink" title="属性操作方法"></a>属性操作方法</h2><ul>
<li><p>通用属性操作</p>
<ul>
<li><strong>attr()</strong><ul>
<li>获取/设置元素的属性</li>
<li>如果操作的是元素自定义的属性，则建议使用attr</li>
</ul>
</li>
<li><strong>removeAttr()</strong><ul>
<li>删除属性</li>
</ul>
</li>
<li><strong>prop()</strong><ul>
<li>获取/设置元素的属性</li>
<li>如果操作的是元素的固有属性，则建议使用prop</li>
</ul>
</li>
<li><strong>removeProp()</strong><ul>
<li>删除属性<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#w3s"</span>).attr(<span class="string">"href"</span>,<span class="string">"http://www.w3school.com.cn/jquery"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>对class属性操作</p>
<ul>
<li><p><strong>addClass()</strong></p>
<ul>
<li>添加class属性值</li>
</ul>
</li>
<li><p><strong>removeClass()</strong></p>
<ul>
<li>删除class属性值</li>
</ul>
</li>
<li><p><strong>toggleClass()</strong></p>
<ul>
<li>切换class属性<ul>
<li>toggleClass(“one”): <ul>
<li>如果元素对象上存在class=”one”，则将属性值one删除掉。</li>
<li>如果元素对象上不存在class=”one”，则添加。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>css()</strong></p>
<ul>
<li>设置/添加属性值</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"h1,h2,p"</span>).addClass(<span class="string">"blue"</span>);</span><br><span class="line">  $(<span class="string">"div"</span>).addClass(<span class="string">"important"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"h1,h2,p"</span>).removeClass(<span class="string">"blue"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"h1,h2,p"</span>).toggleClass(<span class="string">"blue"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"p"</span>).css(<span class="string">"background-color"</span>,<span class="string">"yellow"</span>);</span><br><span class="line">$(<span class="string">"p"</span>).css(&#123;<span class="string">"background-color"</span>:<span class="string">"yellow"</span>,<span class="string">"font-size"</span>:<span class="string">"200%"</span>&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="文档操作方法"><a href="#文档操作方法" class="headerlink" title="文档操作方法"></a>文档操作方法</h2><ul>
<li><strong>append()</strong><ul>
<li>父元素将子元素追加到末尾<ul>
<li>A.append(B)</li>
<li>将B添加到A元素内部，并且在末尾。</li>
</ul>
</li>
</ul>
</li>
<li><strong>prepend()</strong><ul>
<li>父元素将子元素追加到开头<ul>
<li>A.prepend(B)</li>
<li>将B添加到A元素内部，并且在开头。</li>
</ul>
</li>
</ul>
</li>
<li><strong>appendTo()</strong><ul>
<li>子元素将父元素追加到末尾<ul>
<li>A.appendTo(B)</li>
<li>将A添加到B内部，并且在末尾。</li>
</ul>
</li>
</ul>
</li>
<li><strong>prependTo()</strong><ul>
<li>子元素将父元素追加到开头<ul>
<li>A.prependTo(B)</li>
<li>将A添加到B内部，并且在开头。</li>
</ul>
</li>
</ul>
</li>
<li><strong>after()</strong><ul>
<li>添加元素2到元素1后边<ul>
<li>A.after(B)</li>
<li>将B添加到A后边（兄弟关系）</li>
</ul>
</li>
</ul>
</li>
<li><strong>before()</strong><ul>
<li>添加元素2到元素1前边<ul>
<li>A.before(B)</li>
<li>将B添加到A前边（兄弟关系）</li>
</ul>
</li>
</ul>
</li>
<li><strong>insertAfter()</strong><ul>
<li>添加元素1到元素2后边<ul>
<li>A.insertAfter(B)</li>
<li>将A添加到B后边（兄弟关系）</li>
</ul>
</li>
</ul>
</li>
<li><strong>insertBefore()</strong><ul>
<li>添加元素1到元素2前边<ul>
<li>A.insertBefore(B)</li>
<li>将A添加到B前边（兄弟关系）</li>
</ul>
</li>
</ul>
</li>
<li><strong>remove()</strong><ul>
<li>移除元素<ul>
<li>A.remove()</li>
<li>将A删除掉</li>
</ul>
</li>
</ul>
</li>
<li><strong>empty()</strong><ul>
<li>清空元素的所有后代元素。<ul>
<li>A.empty()</li>
<li>将对象的后代元素全部清空，但是保留当前A以及其属性节点<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"p"</span>).append(<span class="string">"Some appended text."</span>);</span><br><span class="line">$(<span class="string">"p"</span>).prepend(<span class="string">"Some prepended text."</span>);</span><br><span class="line">$(<span class="string">"img"</span>).after(<span class="string">"Some text after"</span>);</span><br><span class="line">$(<span class="string">"img"</span>).before(<span class="string">"Some text before"</span>);</span><br><span class="line">$(<span class="string">"#div1"</span>).remove();</span><br><span class="line"><span class="comment">// jQuery remove() 方法也可接受一个参数，允许您对被删元素进行过滤。</span></span><br><span class="line">$(<span class="string">"p"</span>).remove(<span class="string">".italic"</span>);</span><br><span class="line">$(<span class="string">"#div1"</span>).empty();</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h1><h2 id="显示-隐藏"><a href="#显示-隐藏" class="headerlink" title="显示/隐藏"></a>显示/隐藏</h2><ul>
<li>通过 jQuery，您可以使用 hide() 和 show() 方法来隐藏和显示 HTML 元素：<ul>
<li><strong>show( speed，callback  )</strong></li>
<li><strong>hide( speed，callback )</strong></li>
</ul>
</li>
<li>通过 jQuery，您可以使用 toggle() 方法来切换 hide() 和 show() 方法。<ul>
<li><strong>toggle(speed,callback)</strong></li>
</ul>
</li>
<li>speed：参数规定隐藏/显示的速度，可以取以下值：”slow”、”fast” 或毫秒。</li>
<li>callback：参数是隐藏或显示完成后所执行的函数名称。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#hide"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"p"</span>).hide();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#show"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"p"</span>).show();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"p"</span>).toggle();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="淡入-淡出"><a href="#淡入-淡出" class="headerlink" title="淡入/淡出"></a>淡入/淡出</h2><ul>
<li>通过 jQuery，您可以实现元素的淡入淡出效果。<ul>
<li>fadeIn()  用于淡入已隐藏的元素。</li>
<li>fadeOut()  用于淡出可见元素。</li>
<li>fadeToggle()  在淡入淡出之间切换。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#div1"</span>).fadeIn();</span><br><span class="line">  $(<span class="string">"#div2"</span>).fadeIn(<span class="string">"slow"</span>);</span><br><span class="line">  $(<span class="string">"#div3"</span>).fadeIn(<span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#div1"</span>).fadeOut();</span><br><span class="line">  $(<span class="string">"#div2"</span>).fadeOut(<span class="string">"slow"</span>);</span><br><span class="line">  $(<span class="string">"#div3"</span>).fadeOut(<span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"button"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#div1"</span>).fadeToggle();</span><br><span class="line">  $(<span class="string">"#div2"</span>).fadeToggle(<span class="string">"slow"</span>);</span><br><span class="line">  $(<span class="string">"#div3"</span>).fadeToggle(<span class="number">3000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="滑动"><a href="#滑动" class="headerlink" title="滑动"></a>滑动</h2><ul>
<li>通过 jQuery，您可以在元素上创建滑动效果。<ul>
<li>slideDown()  用于向下滑动元素。</li>
<li>slideUp()  用于向上滑动元素。</li>
<li>slideToggle()  在向下滑动向上滑动之间切换。<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#flip"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#panel"</span>).slideDown();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#flip"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#panel"</span>).slideUp();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">"#flip"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  $(<span class="string">"#panel"</span>).slideToggle();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h1 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h1><h2 id="JS的遍历方式"><a href="#JS的遍历方式" class="headerlink" title="JS的遍历方式"></a>JS的遍历方式</h2><ul>
<li>for (初始化值;循环结束条件;步长)<h2 id="Jquery的遍历方式"><a href="#Jquery的遍历方式" class="headerlink" title="Jquery的遍历方式"></a>Jquery的遍历方式</h2></li>
<li><strong>Jquery对象.each(callback)</strong><ul>
<li>jquery对象.each(function(index,element){});<ul>
<li>index:就是元素在集合中的索引</li>
<li>element：就是集合中的每一个元素对象</li>
<li>this：集合中的每一个元素对象</li>
<li>callback：回调函数返回值<ul>
<li>true：如果当前function返回为false，则结束循环(break)。</li>
<li>false：如果当前function返回为true，则结束本次循环，继续下次循环(continue)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>$.each(object, [callback])</strong></li>
<li><strong>for..of</strong><ul>
<li>for(元素对象 of 容器对象)<ul>
<li>Jqueryuery 3.0 之后<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/* for循环 */</span></span><br><span class="line"><span class="keyword">var</span> citys = $(<span class="string">"#city li"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; citys.length; i++) &#123;</span><br><span class="line">    <span class="comment">//获取内容</span></span><br><span class="line">    alert(i+<span class="string">":"</span>+citys[i].innerHTML);</span><br><span class="line">    <span class="keyword">if</span>(<span class="string">"上海"</span> == citys[i].innerHTML)&#123;</span><br><span class="line">        <span class="comment">//break; 结束循环</span></span><br><span class="line">        <span class="comment">//continue; //结束本次循环，继续下次循环</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Jquery对象.each(callback) */</span></span><br><span class="line"><span class="keyword">var</span> citys = $(<span class="string">"#city li"</span>);</span><br><span class="line">citys.each(<span class="function"><span class="keyword">function</span> (<span class="params">index,element</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 1.获取li对象 第一种方式 this</span></span><br><span class="line">    alert(<span class="keyword">this</span>.innerHTML);<span class="comment">//JS对象调用</span></span><br><span class="line">    alert($(<span class="keyword">this</span>).html());<span class="comment">//Jquery对象调用</span></span><br><span class="line">    <span class="comment">// 2.获取li对象 第二种方式 在回调函数中定义参数 index（索引） element（元素对象）</span></span><br><span class="line">    alert(index+<span class="string">":"</span>+element.innerHTML);</span><br><span class="line">    alert(index+<span class="string">":"</span>+$(element).html());</span><br><span class="line">    <span class="comment">//判断如果是上海，则结束循环</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"上海"</span> == $(element).html())&#123;</span><br><span class="line">            <span class="comment">//返回false，结束循环(break)。</span></span><br><span class="line">            <span class="comment">//返回true，结束本次循环，继续下次循环(continue)</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  $.each(object, [callback]) */</span></span><br><span class="line">$.each(citys,<span class="function"><span class="keyword">function</span> (<span class="params">index,element</span>) </span>&#123;</span><br><span class="line">	alert($(<span class="keyword">this</span>).html());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* for ... of  (jquery 3.0 版本之后提供的方式) */</span></span><br><span class="line"><span class="keyword">for</span>(li <span class="keyword">of</span> citys)&#123;</span><br><span class="line">	alert($(li).html());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2><ol>
<li><strong>Jquery标准的绑定方式</strong><ul>
<li><strong>jq对象.事件方法(回调函数)</strong><ul>
<li>注：如果调用事件方法，不传递回调函数，则会触发浏览器默认行为。</li>
<li>表单对象.submit();//让表单提交</li>
</ul>
</li>
</ul>
</li>
<li><strong>on绑定事件/off解除绑定</strong><ul>
<li><strong>jq对象.on(“事件名称”,回调函数)</strong></li>
<li><strong>jq对象.off(“事件名称”)</strong><ul>
<li>如果off方法不传递任何参数，则将组件上的所有事件全部解绑</li>
</ul>
</li>
</ul>
</li>
<li><strong>toggle事件切换</strong><ul>
<li><strong>jq对象.toggle(fn1,fn2…)</strong><ul>
<li>当单击jq对象对应的组件后，会执行fn1.第二次点击会执行fn2…..</li>
<li>注意：1.9版本 .toggle() 方法删除,jQuery Migrate（迁移）插件可以恢复此功能。<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../js/jquery-migrate-1.0.0.js"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ol>
<h1 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h1><ul>
<li><strong>$.fn.extend(object)</strong> <ul>
<li>增强通过Jquery获取的对象的功能  $(“#id”)</li>
</ul>
</li>
<li><strong>$.extend(object)</strong><ul>
<li>增强JQeury对象自身的功能  $/jQuery</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/15/Cookie&Session&JSP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/15/Cookie&Session&JSP/" class="post-title-link" itemprop="url">Cookie&Session&JSP</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-15 18:13:57" itemprop="dateCreated datePublished" datetime="2019-07-15T18:13:57+08:00">2019-07-15</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-19 16:55:55" itemprop="dateModified" datetime="2019-07-19T16:55:55+08:00">2019-07-19</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">3.2k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">3 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="会话技术"><a href="#会话技术" class="headerlink" title="会话技术"></a>会话技术</h1><ul>
<li>概念<ul>
<li>一次会话中包含多次请求和响应。</li>
<li>一次会话：浏览器第一次给服务器资源发送请求，会话建立，直到有一方断开为止。</li>
</ul>
</li>
<li>功能<ul>
<li>在一次会话的范围内的多次请求间，来共享数据。</li>
</ul>
</li>
<li>方式<ul>
<li>客户端会话技术：Cookie</li>
<li>服务器端会话技术：Session</li>
</ul>
</li>
</ul>
<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ul>
<li>客户端会话技术，将数据保存到客户端。<ul>
<li>Cookie 在计算机中是个存储在浏览器目录中的文本文件，当浏览器运行时，存储在 RAM 中发挥作用 （此种 Cookies 称作 Session Cookies）；</li>
<li>一旦用户从该网站或服务器退出，Cookie 可存储在用户本地的硬盘上 （此种 Cookies 称作 Persistent Cookies）</li>
</ul>
</li>
</ul>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><ul>
<li>使用步骤：<ul>
<li>服务器通过response，对浏览器发送cookie<ul>
<li>*<em>new Cookie(String name, String value) *</em></li>
<li>*<em>response.addCookie(Cookie cookie) *</em></li>
</ul>
</li>
<li>服务器通过request，接收浏览器发送的cookie<ul>
<li>*<em>Cookie[]  request.getCookies() *</em></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h2><ul>
<li>服务器通过response，对浏览器发送cookie<ul>
<li>服务器将数据，保存在响应头的set-cookie中。</li>
</ul>
</li>
<li>当服务器通过request，接收浏览器发送的cookie<ul>
<li>浏览器将数据，保存在请求头的cookie中。</li>
</ul>
</li>
</ul>
<h2 id="cookie的细节"><a href="#cookie的细节" class="headerlink" title="cookie的细节"></a>cookie的细节</h2><h3 id="一次可不可以发送多个cookie"><a href="#一次可不可以发送多个cookie" class="headerlink" title="一次可不可以发送多个cookie?"></a>一次可不可以发送多个cookie?</h3><ul>
<li>一次可以发送多个cookie。<ul>
<li>创建多个Cookie对象，使用response调用多次addCookie方法发送cookie即可。<h3 id="cookie在浏览器中保存多长时间？"><a href="#cookie在浏览器中保存多长时间？" class="headerlink" title="cookie在浏览器中保存多长时间？"></a>cookie在浏览器中保存多长时间？</h3></li>
</ul>
</li>
<li>默认情况下，当浏览器关闭后，Cookie数据被销毁。</li>
<li>设置Cookie生命周期，使其持久化存储<ul>
<li><strong>setMaxAge(int seconds)</strong><ul>
<li>正数：持久化存储，并指定cookie存活时间。<ul>
<li>在时间内，关闭浏览器cookie仍然可访问。</li>
</ul>
</li>
<li>负数：默认值<ul>
<li>关闭浏览器后，无法访问。</li>
</ul>
</li>
<li>零：删除cookie信息<ul>
<li>一般是先设置持久化存储，然后删除。<h3 id="cookie能不能存储中文？"><a href="#cookie能不能存储中文？" class="headerlink" title="cookie能不能存储中文？"></a>cookie能不能存储中文？</h3></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>在tomcat8 之前，cookie中不能直接存储中文数据。<ul>
<li>需要将中文数据转码为一般采用URL编码(%E3)</li>
</ul>
</li>
<li>在tomcat 8 之后，cookie支持中文数据。<ul>
<li>特殊字符还是不支持，建议使用URL编码存储，URL解码解析<h3 id="cookie共享问题？"><a href="#cookie共享问题？" class="headerlink" title="cookie共享问题？"></a>cookie共享问题？</h3></li>
</ul>
</li>
<li>在同一个tomcat服务器中的多个web项目的cookie能不能共享？<ul>
<li>默认情况下cookie不能共享</li>
<li>设置获取cookie范围（默认设置当前虚拟目录）<ul>
<li><strong>setPath(String path)</strong></li>
<li>如果要共享，则可以将path设置为”/“（根路径）</li>
</ul>
</li>
</ul>
</li>
<li>在不同的tomcat服务器间cookie能不能共享？<ul>
<li>设置获取cookie范围<ul>
<li><strong>setDomain(String path)</strong></li>
</ul>
</li>
<li>如果设置一级域名相同，那么多个服务器之间cookie可以共享<ul>
<li>setDomain(“.baidu.com”)<ul>
<li>那么tieba.baidu.com和news.baidu.com中cookie可以共享</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="特点和作用"><a href="#特点和作用" class="headerlink" title="特点和作用"></a>特点和作用</h2><ul>
<li>特点<ul>
<li>cookie存储数据在客户端浏览器<ul>
<li>浏览器对于单个cookie 的大小有限制(4kb) </li>
<li>浏览器对同一个域名下的总cookie数量也有限制(20个)</li>
</ul>
</li>
</ul>
</li>
<li>作用：<ul>
<li>cookie一般用于存出少量的不太敏感的数据</li>
<li>在不登录的情况下，完成服务器对客户端的身份识别（个性化设置）</li>
</ul>
</li>
</ul>
<h1 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><ul>
<li>Java Server Pages（java服务器端页面）</li>
<li>可以理解为：一个特殊的页面，其中既可以指定定义html标签，又可以定义java代码</li>
<li>用于简化书写！！！</li>
</ul>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ul>
<li>JSP本质上就是一个Servlet实现类<ul>
<li>如果我们要编写一个正常的主页，那么我们在servlet实现类中既要写后端代码，也要写前端代码。但是在servlet实现类中写前端代码（response.write.write()）太麻烦了，所以出现了JSP。</li>
<li>JSP本质是一个servlet实现类，它会将所有的前端代码自动的包裹进输出代码（out.write()）。</li>
</ul>
</li>
</ul>
<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><ul>
<li>JSP的脚本：JSP定义Java代码的方式<ul>
<li><strong>&lt;%   %&gt;</strong><ul>
<li>定义的java代码，在service方法中。</li>
</ul>
</li>
<li><strong>&lt;%!  %&gt;</strong><ul>
<li>定义的java代码，定义java类的成员。</li>
</ul>
</li>
<li><strong>&lt;%=  %&gt;</strong><ul>
<li>定义的java代码，输出到页面上。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h2><ul>
<li>在jsp页面中不需要获取和创建，可以直接使用的对象</li>
<li>jsp一共有9个内置对象<ul>
<li>request</li>
<li>response</li>
<li>out<ul>
<li>字符输出流对象。可以将数据输出到页面上。</li>
</ul>
</li>
</ul>
</li>
<li>response.getWriter()和out.write()的区别：<ul>
<li>在tomcat服务器真正给客户端做出响应之前，会先找response缓冲区数据，再找out缓冲区数据。</li>
<li>response.getWriter()数据输出永远在out.write()之前</li>
</ul>
</li>
</ul>
<h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><h2 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h2><ul>
<li>服务器端会话技术，在一次会话的多次请求间共享数据，将数据保存在服务器端的对象中。</li>
</ul>
<h2 id="快速入门-1"><a href="#快速入门-1" class="headerlink" title="快速入门"></a>快速入门</h2><ul>
<li>获取HttpSession对象<ul>
<li><strong>HttpSession session = request.getSession()</strong></li>
</ul>
</li>
<li>使用HttpSession对象<ul>
<li><strong>Object getAttribute(String name)</strong> </li>
<li><strong>void setAttribute(String name, Object value)</strong></li>
<li>*<em>void removeAttribute(String name) *</em></li>
</ul>
</li>
</ul>
<h2 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h2><ul>
<li>Session的实现是依赖于Cookie的。</li>
</ul>
<h2 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h2><ol>
<li><p>当浏览器关闭后，服务器不关闭，两次获取的session是否相同？</p>
<ul>
<li>默认情况下，两次session不同。<ul>
<li>浏览器关闭，意味着会话结束。</li>
</ul>
</li>
<li>如果需要两次session相同<ul>
<li>创建Cookie,键为JSESSIONID，设置最大存活时间，让cookie持久化保存。<ul>
<li>Cookie cookie = new Cookie(“JSESSIONID”,session.getId());</li>
<li>cookie.setMaxAge(60*60);</li>
<li>response.addCookie(c);</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>浏览器不关闭，服务器关闭后，两次获取的session是否相同？</p>
<ul>
<li>两次session不同，但是要确保数据不丢失。</li>
<li>tomcat自动完成，IDEA不能 自动完成。</li>
<li>session的钝化：<ul>
<li>在服务器正常关闭之前，将session对象系列化到硬盘上。</li>
</ul>
</li>
<li>session的活化：<ul>
<li>在服务器启动后，将session文件转化为内存中的session对象即可。</li>
</ul>
</li>
</ul>
</li>
<li><p>session什么时候被销毁？</p>
<ol>
<li>服务器关闭</li>
<li>session对象调用invalidate() 。</li>
<li>session默认失效时间 30分钟<ul>
<li>选择性配置修改    </li>
<li>&lt;session-config&gt;</li>
<li>&lt;session-timeout&gt;30</li>
<li>&lt;session-config&gt;</li>
</ul>
</li>
</ol>
</li>
</ol>
<p>##　特点<br>－ session用于存储一次会话的多次请求的数据，存在服务器端。<br>－ session可以存储任意类型，任意大小的数据。</p>
<h2 id="session与Cookie的区别"><a href="#session与Cookie的区别" class="headerlink" title="session与Cookie的区别"></a>session与Cookie的区别</h2><ul>
<li>Session(会话）<br>  － session存储数据在服务器端　　<br>  － session没有数据大小限制　　　<br>  － session数据安全</li>
<li>Cookie（甜点）<br>  －Cookie有数据大小限制　<br>  －Cookie存储数据在客户端<br>  －Cookie相对于不安全</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/14/response/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/14/response/" class="post-title-link" itemprop="url">Request</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-14 10:13:57" itemprop="dateCreated datePublished" datetime="2019-07-14T10:13:57+08:00">2019-07-14</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-19 16:46:22" itemprop="dateModified" datetime="2019-07-19T16:46:22+08:00">2019-07-19</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">1.6k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">1 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h1><h2 id="设置响应行"><a href="#设置响应行" class="headerlink" title="设置响应行"></a>设置响应行</h2><ul>
<li>设置状态码<ul>
<li>*<em>setStatus(int sc) *</em></li>
</ul>
</li>
</ul>
<h2 id="设置响应头"><a href="#设置响应头" class="headerlink" title="设置响应头"></a>设置响应头</h2><ul>
<li>设置响应头<ul>
<li>*<em>setHeader(String name, String value) *</em></li>
</ul>
</li>
</ul>
<h2 id="设置响应体"><a href="#设置响应体" class="headerlink" title="设置响应体"></a>设置响应体</h2><ul>
<li>获取输出流<ul>
<li>字符输出流（字符数据）<ul>
<li><strong>PrintWriter getWriter()</strong></li>
</ul>
</li>
<li>字节输出流（任意数据）<ul>
<li><strong>ServletOutputStream getOutputStream()</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h1><h2 id="重定向（redirect）"><a href="#重定向（redirect）" class="headerlink" title="重定向（redirect）"></a>重定向（redirect）</h2><blockquote>
<p>   重定向是一种在互联网中的资源跳转方式。</p>
</blockquote>
<ul>
<li>方法一<ol>
<li>通过response对象设置状态码<ul>
<li><strong>response.setStatus(302);</strong></li>
</ul>
</li>
<li>使用response对象设置响应头的location参数<ul>
<li>*<em>response.setHeader(“location”,”/response2”); *</em></li>
</ul>
</li>
</ol>
</li>
<li>方法二<ul>
<li>通过response对象的重定向方法<ul>
<li><strong>response.sendRedirect(“/response2”);</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="重定向的特点"><a href="#重定向的特点" class="headerlink" title="重定向的特点"></a>重定向的特点</h3><ul>
<li>重定向<ul>
<li>重定向 地址栏会发生变化</li>
<li>重定向 可以访问其他服务器的资源</li>
<li>重定向 是两次请求</li>
</ul>
</li>
</ul>
<h3 id="转发的特点"><a href="#转发的特点" class="headerlink" title="转发的特点"></a>转发的特点</h3><ul>
<li>转发<ul>
<li>转发 地址栏不会发生变化</li>
<li>转发 不可以访问其他服务器的资源</li>
<li>转发 是一次请求</li>
</ul>
</li>
</ul>
<h2 id="输出数据"><a href="#输出数据" class="headerlink" title="输出数据"></a>输出数据</h2><ul>
<li>设置</li>
<li>获取字符输出流<ul>
<li>PrintWriter writer = response.getWriter();</li>
</ul>
</li>
<li>输出数据<ul>
<li>writer.write(“&lt;h1&gt;在恭喜发财！&lt;/h1&gt;”);</li>
</ul>
</li>
</ul>
<h2 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h2><ul>
<li>在获取流之前，设置流编码为系统默认编码（可以不写）<ul>
<li>response.setCharacterEncoding(“utf-8”);</li>
</ul>
</li>
<li>设置浏览器解码的编码<ul>
<li>response.setHeader(“content-type”,”text/html;charset=utf-8”);</li>
</ul>
</li>
<li>设置浏览器解码的编码（简化）<ul>
<li><strong>response.setContentType(“text/html;charset=utf-8”);</strong></li>
</ul>
</li>
</ul>
<h1 id="ServletContext对象"><a href="#ServletContext对象" class="headerlink" title="ServletContext对象"></a>ServletContext对象</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ul>
<li>ServletContext对象代表整个web应用，可以和程序的容器(服务器)来通信。<h2 id="获取"><a href="#获取" class="headerlink" title="获取"></a>获取</h2></li>
<li>通过request对象获取<ul>
<li><strong>request.getServletContext();</strong></li>
</ul>
</li>
<li>通过HttpServlet获取<ul>
<li><strong>this.getServletContext();</strong><h2 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h2><h3 id="获取MIME类型"><a href="#获取MIME类型" class="headerlink" title="获取MIME类型"></a>获取MIME类型</h3></li>
</ul>
</li>
<li>获取MIME类型<ul>
<li><strong>String getMimeType(String file)</strong>  </li>
</ul>
</li>
<li>MIME类型:在互联网通信过程中定义的一种文件数据类型<ul>
<li>格式： 大类型/小类型   <ul>
<li>text/html</li>
<li>image/jpeg</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="共享数据"><a href="#共享数据" class="headerlink" title="共享数据"></a>共享数据</h3><blockquote>
<p>域对象：一个有作用范围的对象，可以在范围内共享数据。<br>request域：代表一次请求的范围，一般用于让请求转发的多个资源共享数据。<br><strong>ServletContext域：所有用户所有请求的数据</strong></p>
</blockquote>
<ul>
<li>方法<ul>
<li>存储数据<ul>
<li>void <strong>setAttribute(String name,Object obj)</strong></li>
</ul>
</li>
<li>通过键 获取值<ul>
<li>Object <strong>getAttitude(String name)</strong></li>
</ul>
</li>
<li>通过键 移除键值对<ul>
<li>void <strong>removeAttribute(String name)</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="文件真实路径"><a href="#文件真实路径" class="headerlink" title="文件真实路径"></a>文件真实路径</h2><ul>
<li>获取文件的真实路径（tomcat服务器）<ul>
<li><strong>String getRealPath(String path);</strong>  </li>
</ul>
</li>
<li>web目录下资源访问<ul>
<li>context.getRealPath(<strong>“/b.txt”</strong>);</li>
</ul>
</li>
<li>WEB-INF目录下的资源访问<ul>
<li>context.getRealPath(<strong>“/WEB-INF/c.txt”</strong>);</li>
</ul>
</li>
<li>src目录下的资源访问<ul>
<li>context.getRealPath(<strong>“/WEB-INF/classes/a.txt”</strong>);</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/13/request/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/13/request/" class="post-title-link" itemprop="url">Request</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-13 15:13:57" itemprop="dateCreated datePublished" datetime="2019-07-13T15:13:57+08:00">2019-07-13</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-19 16:46:02" itemprop="dateModified" datetime="2019-07-19T16:46:02+08:00">2019-07-19</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">5.3k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">5 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><ul>
<li>request和response对象是由服务器创建的。我们来使用它们</li>
<li>request对象是来获取请求消息，response对象是来设置响应消息</li>
</ul>
<h1 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h1><ul>
<li><strong>ServletRequest 接口</strong> <ul>
<li><strong>HttpServletRequest  接口</strong> （继承）<ul>
<li><strong>org.apache.catalina.connector.RequestFacade 类</strong>（Tomcat实现）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h1><h2 id="获取请求消息数据"><a href="#获取请求消息数据" class="headerlink" title="获取请求消息数据"></a>获取请求消息数据</h2><h3 id="获取请求行数据"><a href="#获取请求行数据" class="headerlink" title="获取请求行数据"></a>获取请求行数据</h3><ul>
<li>请求行数据：GET  /web/A?name=Cat  HTTP/1.1<ul>
<li>请求方式： GET<ul>
<li>String   <strong>getMethod()</strong></li>
</ul>
</li>
<li>请求端的URI(统一资源标识符) 地址：/web/A<ul>
<li>String   <strong>getRequestURI()</strong></li>
</ul>
</li>
<li>请求端的URL(统一资源定位符)地址： http: //localhost//web/A<ul>
<li>StringBuilder   <strong>getRequestURL()</strong></li>
</ul>
</li>
<li>虚拟目录：/web<ul>
<li>String   <strong>getContextPath()</strong></li>
</ul>
</li>
<li>服务器路径：/A<ul>
<li>String   <strong>getServletPath()</strong></li>
</ul>
</li>
<li>请求参数：name=Cat<ul>
<li>String   <strong>getQueryString()</strong></li>
</ul>
</li>
<li>HTTP协议的版本：HTTP/1.1<ul>
<li>String   <strong>getProtocol()</strong></li>
</ul>
</li>
<li>获取客户机的IP地址：<ul>
<li>String   <strong>getRemoteAddr()</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求方式： GET</span></span><br><span class="line">	String method = request.getMethod();</span><br><span class="line"><span class="comment">//请求端的URI地址：/web/A</span></span><br><span class="line">	String requestURI = request.getRequestURI();</span><br><span class="line"><span class="comment">//请求端的URI地址：/web/A</span></span><br><span class="line">	StringBuffer requestURL = request.getRequestURL();</span><br><span class="line"><span class="comment">//虚拟目录：/web</span></span><br><span class="line">	String contextPath = request.getContextPath();</span><br><span class="line"><span class="comment">//服务器路径：/A</span></span><br><span class="line">	String servletPath = request.getServletPath();</span><br><span class="line"><span class="comment">//请求参数：name=Cat</span></span><br><span class="line">	String queryString = request.getQueryString();</span><br><span class="line"><span class="comment">//HTTP协议的版本：HTTP/1.1</span></span><br><span class="line">	String protocol = request.getProtocol();</span><br><span class="line"><span class="comment">//获取客户机的IP地址：</span></span><br><span class="line">	String remoteAddr = request.getRemoteAddr();</span><br><span class="line"><span class="comment">//获取客户机的端口号</span></span><br><span class="line">	<span class="keyword">int</span> remotePort = request.getRemotePort();</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="获取请求头数据"><a href="#获取请求头数据" class="headerlink" title="获取请求头数据"></a>获取请求头数据</h3><ul>
<li>请求头数据<ul>
<li>通过请求头的名称 获取请求头的值<ul>
<li>String   <strong>getHeader(String name)</strong></li>
</ul>
</li>
<li>获取 所有的请求头名称（判断浏览器）<ul>
<li>Enumeration&lt;String&gt;  <strong>getHeaderNames():</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取 所有的请求头名称</span></span><br><span class="line">    Enumeration&lt;String&gt; headerNames = request.getHeaderNames();</span><br><span class="line">    <span class="keyword">while</span> (headerNames.hasMoreElements())&#123;</span><br><span class="line">	<span class="comment">//通过请求头的名称 获取请求头的值</span></span><br><span class="line">        String name = headerNames.nextElement();</span><br><span class="line">        String value = request.getHeader(name);</span><br><span class="line">        System.out.println(name+<span class="string">" ===== "</span>+value);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="获取请求体数据"><a href="#获取请求体数据" class="headerlink" title="获取请求体数据"></a>获取请求体数据</h3><ul>
<li>请求体（POST请求方式）<ul>
<li>获取字符输入流（字符数据）<ul>
<li>BufferedReader   <strong>getReader()</strong></li>
</ul>
</li>
<li>获取字节输入流（所有类型数据）<ul>
<li>ServletInputStream <strong>getInputStream()</strong><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/request1"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"dance"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"sing"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"hobby"</span> <span class="attr">value</span>=<span class="string">"rap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/request1"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Request1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取字符输入流（字符数据）</span></span><br><span class="line">    BufferedReader reader = request.getReader();</span><br><span class="line">    String line;</span><br><span class="line">    <span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">    	System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h1><h2 id="获取动态目录"><a href="#获取动态目录" class="headerlink" title="获取动态目录"></a>获取动态目录</h2><ul>
<li>为了防止虚拟目录变更，建议使用动态虚拟目录<br>  -<strong>getContextPath()</strong>     <h3 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h3></li>
<li>相对路径<ul>
<li>相对路径 无法确定唯一资源    ./index.html</li>
<li>当前资源和目标资源的相对位置关系<ul>
<li>./  当前目录</li>
<li>../  后退一级目录</li>
</ul>
</li>
</ul>
</li>
<li>绝对路径<ul>
<li>绝对路径 可以确定唯一资源    /web/index.html </li>
</ul>
</li>
</ul>
<h2 id="获取请求参数-通用"><a href="#获取请求参数-通用" class="headerlink" title="获取请求参数(通用)"></a>获取请求参数(通用)</h2><ul>
<li>获取请求参数通用方式</li>
<li>不论get还是post请求方式都可以使用下列方法来获取请求参数<ul>
<li>根据参数名称 获取参数值 ：(username) cat<ul>
<li>String   <strong>getParameter(String name)</strong></li>
</ul>
</li>
<li>根据参数名称 获取参数值的数组：(hobby) dance sing rap<ul>
<li>String[]  <strong>getParameterValues(String name)</strong> </li>
</ul>
</li>
<li>获取 所有请求的参数名称：username hobby<ul>
<li>Enumeration&lt;String&gt;  <strong>getParameterNames()</strong></li>
</ul>
</li>
<li>获取 所有参数的map集合：username=cat hobby=sing,rap<ul>
<li>Map&lt;String,String[]&gt; <strong>getParameterMap()</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//根据参数名称 获取参数值 ：(username)cat</span></span><br><span class="line">    String username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">    System.out.println(username);</span><br><span class="line">    </span><br><span class="line"><span class="comment">//根据参数名称 获取参数值的数组：(hobby) dance sing rap</span></span><br><span class="line">    String[] hobbies = request.getParameterValues(<span class="string">"hobby"</span>);</span><br><span class="line">    <span class="keyword">for</span> (String hobby : hobbies) &#123;</span><br><span class="line">    System.out.println(hobby);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取 所有请求的参数名称： username hobby</span></span><br><span class="line">Enumeration&lt;String&gt; parameterNames = request.getParameterNames();</span><br><span class="line"><span class="keyword">while</span> (parameterNames.hasMoreElements())&#123;</span><br><span class="line">String s = parameterNames.nextElement();</span><br><span class="line">System.out.println(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取 所有参数的map集合</span></span><br><span class="line">    <span class="comment">/* Map集合：获取所有参数 */</span></span><br><span class="line">    Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">    <span class="comment">/* Set集合：包含参数和参数的值们 */</span></span><br><span class="line">    Set&lt;String&gt; keyset = parameterMap.keySet();</span><br><span class="line">    <span class="comment">/* 迭代器*/</span></span><br><span class="line">    Iterator&lt;String&gt; iterator = keyset.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        String key = iterator.next();</span><br><span class="line">        System.out.print(key+<span class="string">": "</span>);</span><br><span class="line">        String[] values = parameterMap.get(key);</span><br><span class="line">        <span class="keyword">for</span> (String value : values) &#123;</span><br><span class="line">        	System.out.print(value+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="请求转发（forword）"><a href="#请求转发（forword）" class="headerlink" title="请求转发（forword）"></a>请求转发（forword）</h2><blockquote>
<p>   请求转发是一种在服务器内部的资源跳转方式。</p>
</blockquote>
<ul>
<li>步骤<ol>
<li>通过request对象获取请求转发器对象<ul>
<li>RequestDispatcher <strong>getRequestDispatcher(String path)</strong></li>
</ul>
</li>
<li>使用RequestDispatcher对象来进行转发<ul>
<li>*<em>forward(ServletRequest request, ServletResponse response) *</em></li>
</ul>
</li>
</ol>
</li>
<li>特点<ul>
<li>浏览器地址栏路径不发生变化。</li>
<li>只能转发到当前服务器内部资源中。</li>
<li>多个服务器资源使用一次请求。</li>
</ul>
</li>
</ul>
<blockquote>
<p>Java文件一</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/request111"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Request1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"助理：我是处理部门的助理，你有什么问题？"</span>);</span><br><span class="line">        System.out.println(<span class="string">"助理：你的问题我解决不了，我去叫经理，稍等。"</span>);</span><br><span class="line">        <span class="comment">//找到“经理的位置”</span></span><br><span class="line">            RequestDispatcher requestDispatcher = 	request.getRequestDispatcher(<span class="string">"/request222"</span>);</span><br><span class="line">        <span class="comment">//把“问题”告诉经理</span></span><br><span class="line">            requestDispatcher.forward(request,response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Java文件二</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/request222"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Request2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"经理：我是处理部门的经理，你有什么问题？"</span>);</span><br><span class="line">        System.out.println(<span class="string">"经理：你的问题我已经解决了，你回去吧。"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="共享数据"><a href="#共享数据" class="headerlink" title="共享数据"></a>共享数据</h2><blockquote>
<p>域对象：一个有作用范围的对象，可以在范围内共享数据。<br>request域：代表一次请求的范围，一般用于让请求转发的多个资源共享数据。</p>
</blockquote>
<ul>
<li>方法<ul>
<li>存储数据<ul>
<li>void <strong>setAttribute(String name,Object obj)</strong></li>
</ul>
</li>
<li>通过键 获取值<ul>
<li>Object <strong>getAttitude(String name)</strong></li>
</ul>
</li>
<li>通过键 移除键值对<ul>
<li>void <strong>removeAttribute(String name)</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="中文乱码问题"><a href="#中文乱码问题" class="headerlink" title="中文乱码问题"></a>中文乱码问题</h2><ul>
<li>get方式：tomcat 8 已经将get方式乱码问题解决了。</li>
<li>post方式：中文或非法数据会乱码。<ul>
<li>解决：在获取参数前，设置request的编码</li>
<li><strong>request.setCharacterEncoding(“utf-8”);</strong></li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/12/Filter&Listener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/12/Filter&Listener/" class="post-title-link" itemprop="url">Filter&Listener</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-12 20:13:57" itemprop="dateCreated datePublished" datetime="2019-07-12T20:13:57+08:00">2019-07-12</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-19 16:55:25" itemprop="dateModified" datetime="2019-07-19T16:55:25+08:00">2019-07-19</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">1.7k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">2 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Filter（过滤器）"><a href="#Filter（过滤器）" class="headerlink" title="Filter（过滤器）"></a>Filter（过滤器）</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><ul>
<li>web中的过滤器：当访问服务器的资源时，过滤器可以将请求拦截下来，完成一些特殊的功能。<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2></li>
<li>一般用于完成通用的操作。</li>
<li>如：登录验证、统一编码处理、敏感字符过滤…</li>
</ul>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><ul>
<li>定义一个类，实现接口Filter<ul>
<li>复写方法</li>
</ul>
</li>
<li>配置拦截路径<ul>
<li>web.xml</li>
<li>注解</li>
</ul>
</li>
</ul>
<h2 id="过滤器细节"><a href="#过滤器细节" class="headerlink" title="过滤器细节"></a>过滤器细节</h2><h3 id="web-xml配置"><a href="#web-xml配置" class="headerlink" title="web.xml配置"></a>web.xml配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>cn.itcast.web.filter.FilterDemo1<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>demo1<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 拦截路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/-<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="过滤器执行流程"><a href="#过滤器执行流程" class="headerlink" title="过滤器执行流程"></a>过滤器执行流程</h2><ol>
<li>执行过滤器</li>
<li>执行放行后的资源</li>
<li>回来执行过滤器放行代码下边的代码<h2 id="过滤器生命周期方法"><a href="#过滤器生命周期方法" class="headerlink" title="过滤器生命周期方法"></a>过滤器生命周期方法</h2></li>
</ol>
<ul>
<li><p>init</p>
<ul>
<li>在服务器启动后，会创建Filter对象，然后调用init方法。</li>
<li>只执行一次。</li>
<li>用于加载资源。</li>
</ul>
</li>
<li><p>doFilter</p>
<ul>
<li>每一次请求被拦截资源时，会执行。</li>
<li>执行多次。</li>
</ul>
</li>
<li><p>destroy</p>
<ul>
<li>在服务器关闭后，Filter对象被销毁。</li>
<li>如果服务器是正常关闭，则会执行destroy方法。</li>
<li>只执行一次。</li>
<li>用于释放资源。<h2 id="过滤器配置详解"><a href="#过滤器配置详解" class="headerlink" title="过滤器配置详解"></a>过滤器配置详解</h2><h3 id="拦截路径配置"><a href="#拦截路径配置" class="headerlink" title="拦截路径配置"></a>拦截路径配置</h3></li>
</ul>
</li>
<li><p>具体资源路径</p>
<ul>
<li><strong>/index.jsp</strong>  </li>
<li>只有访问index.jsp资源时，过滤器才会被执行</li>
</ul>
</li>
<li><p>拦截目录</p>
<ul>
<li><strong>/user/*</strong>    </li>
<li>访问/user下的所有资源时，过滤器都会被执行</li>
</ul>
</li>
<li><p>后缀名拦截</p>
<ul>
<li><strong>*.jsp</strong>        </li>
<li>访问所有后缀名为jsp资源时，过滤器都会被执行</li>
</ul>
</li>
<li><p>拦截所有资源</p>
<ul>
<li><strong>/*</strong>        </li>
<li>访问所有资源时，过滤器都会被执行<h3 id="拦截方式配置"><a href="#拦截方式配置" class="headerlink" title="拦截方式配置"></a>拦截方式配置</h3><blockquote>
<p>资源被访问的方式</p>
</blockquote>
</li>
</ul>
</li>
<li><p>注解配置</p>
<ul>
<li>设置dispatcherTypes属性<ol>
<li><strong>REQUEST</strong>：默认值，浏览器直接请求资源。</li>
<li><strong>FORWARD</strong>：转发访问资源 。</li>
<li><strong>ERROR</strong>：错误跳转资源。</li>
<li><strong>ASYNC</strong>：异步访问资源。</li>
</ol>
</li>
</ul>
</li>
<li><p>web.xml配置</p>
<ul>
<li>设置&lt;dispatcher&gt;&lt;/dispatcher&gt;标签即可</li>
</ul>
</li>
</ul>
<h2 id="过滤器链-配置多个过滤器"><a href="#过滤器链-配置多个过滤器" class="headerlink" title="过滤器链(配置多个过滤器)"></a>过滤器链(配置多个过滤器)</h2><ul>
<li><p>执行顺序：如果有两个过滤器：过滤器1和过滤器2</p>
<ol>
<li>过滤器1</li>
<li>过滤器2</li>
<li>资源执行</li>
<li>过滤器2</li>
<li>过滤器1 </li>
</ol>
</li>
<li><p>过滤器先后顺序问题：</p>
<ol>
<li>注解配置：按照类名的字符串比较规则比较，值小的先执行<ul>
<li>如： AFilter 和 BFilter，AFilter就先执行了。</li>
</ul>
</li>
<li>web.xml配置：&lt;filter-mapping&gt;谁定义在上边，谁先执行</li>
</ol>
</li>
</ul>
<h1 id="Listener（监听器）"><a href="#Listener（监听器）" class="headerlink" title="Listener（监听器）"></a>Listener（监听器）</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2><ul>
<li>web的三大组件之一<h2 id="事件监听机制"><a href="#事件监听机制" class="headerlink" title="事件监听机制"></a>事件监听机制</h2></li>
<li>事件：一件事情</li>
<li>事件源 ：事件发生的地方</li>
<li>监听器 ：一个对象</li>
<li>注册监听：将事件、事件源、监听器绑定在一起。 当事件源上发生某个事件后，执行监听器代码<h2 id="运用"><a href="#运用" class="headerlink" title="运用"></a>运用</h2></li>
<li>监听ServletContext对象的创建和销毁<ul>
<li>ServletContextListener</li>
</ul>
</li>
<li>方法：<ul>
<li>ServletContext对象被销毁之前会调用该方法<ul>
<li>void contextDestroyed(ServletContextEvent sce) </li>
</ul>
</li>
<li>ServletContext对象创建后会调用该方法<ul>
<li>void contextInitialized(ServletContextEvent sce) </li>
</ul>
</li>
</ul>
</li>
<li><h2 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h2></li>
</ul>
<ol>
<li>定义一个类，实现ServletContextListener接口</li>
<li>复写方法</li>
<li>配置<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">web.xml</span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>listener.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><ul>
<li>@WebListener</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/12/servlet/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/12/servlet/" class="post-title-link" itemprop="url">Servlet</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-12 14:52:31" itemprop="dateCreated datePublished" datetime="2019-07-12T14:52:31+08:00">2019-07-12</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-19 16:45:37" itemprop="dateModified" datetime="2019-07-19T16:45:37+08:00">2019-07-19</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/学习笔记/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">5.2k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">5 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><ul>
<li><strong>server applet：运行在服务器端的小程序</strong></li>
<li>为了更好的理解servlet，我们先从B/S模式来示例<ul>
<li>用户输入账号密码，请求登录<ul>
<li>我们需要判断 用户A输入的账号和密码是否正确。</li>
<li>此处需要运用 Java逻辑来判断。</li>
<li>也就是，我们需要通过Java代码来确定。</li>
<li>具体就是，通过Java类来实现。</li>
</ul>
</li>
<li>创建 Java类，判断账号密码<ul>
<li>但是，并非所有的Java类都可以在服务器端运行，想要在服务器端运行就必须依赖于服务器端。</li>
<li>换句话说，想要在服务器端运行就要遵循服务器端的”规则“。</li>
<li>而具体来说，在Java中的规则，即是接口。</li>
</ul>
</li>
</ul>
</li>
<li>Servlet就是一个接口<ul>
<li>Servlet接口中定义了能被浏览器访问到的，且能被tomcat服务器识别到的Java类的规则。</li>
<li>自定义一个类，实现Servlet接口，复写Servlet接口方法。</li>
</ul>
</li>
</ul>
<h1 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h1><ol>
<li>创建JavaEE项目</li>
<li>定义一个实现了Servlet接口的类</li>
<li>实现Servlet接口中的抽象方法</li>
<li>重写抽象方法，输出文字</li>
<li>配置web.xml文件，设置虚拟路径</li>
<li>启动tomcat服务器</li>
<li>项目的访问路径 （虚拟目录）：<em>localhost:8080/web/demo</em></li>
<li>文字输出在服务器端</li>
<li>刷新一次页面，输出一次文字</li>
</ol>
<blockquote>
<p>java文件</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A_ServletDemo</span> <span class="keyword">implements</span> <span class="title">Servlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="keyword">null</span>;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* 提供服务的方法 */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello Servlet!!!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> <span class="keyword">null</span>;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在web/WEB-INF目录下，配置web.xml</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置Servlet --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- name --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 全类名 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>Servlet.A_ServletDemo<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--配置Servlet映射--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- name --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 虚拟路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/demo<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="执行原理"><a href="#执行原理" class="headerlink" title="执行原理"></a>执行原理</h1><h2 id="客户端对服务器发出请求"><a href="#客户端对服务器发出请求" class="headerlink" title="客户端对服务器发出请求"></a>客户端对服务器发出请求</h2><ol>
<li>用户通过浏览器对服务器发出请求（ *<em>http: //localhost:8080/web/demo *</em> ）</li>
<li>Tomcat服务器接受请求，并开始解析URL路径<ul>
<li>web.xml文件<ul>
<li>首先，Tomcat服务器通过虚拟路径找到相对应的&lt;url-pattern&gt;标签。</li>
<li>其次，Tomcat服务器通过&lt;url-pattern&gt;标签，获取&lt;servlet-name&gt;标签，以及&lt;servlet-class&gt;标签。</li>
<li>最后，Tomcat服务器通过&lt;servlet-class&gt;标签，获取到Java文件的全类名。</li>
</ul>
</li>
</ul>
</li>
<li>Tomcat服务器将java文件加载进内存（<u>classObj = Class.forName(全类名);</u> ）</li>
<li>Tomcat服务器创建Servlet对象（ <u>classObj.instance();</u> ）</li>
<li>Tomcat服务器创建request对象和response对象。<ul>
<li>request对象中封装 请求消息数据</li>
<li>response对象中封装 响应消息数据</li>
</ul>
</li>
<li>Tomcat服务器调用service方法，并传入request对象和response对象。<ul>
<li>我们通过request对象获取请求消息数据</li>
<li>并通过response对象设置响应消息数据</li>
</ul>
</li>
<li>Tomcat服务器在给浏览器做出响应之前，会从response对象中拿出设置好的响应消息数据。 <h2 id="不同的请求方式"><a href="#不同的请求方式" class="headerlink" title="不同的请求方式"></a>不同的请求方式</h2><h3 id="GET方式"><a href="#GET方式" class="headerlink" title="GET方式"></a>GET方式</h3></li>
</ol>
<ul>
<li>如果我们要通过GET方式来对Tomcat服务器发送请求，那么我们可以直接访问Tomcat服务器中的GET实现类。<ul>
<li>比如，我创建了一个HTTPServlet实现类，但是里面只重写了doGET方法。此时可打开Tomcat服务器，直接通过浏览器访问GET实现类，继而完成在Tomcat服务器中的操作。<h3 id="POST方式"><a href="#POST方式" class="headerlink" title="POST方式"></a>POST方式</h3></li>
</ul>
</li>
<li>如果我们要通过POST方式来对Tomcat客户端发送请求，那么我们就不可以直接访问Tomcat客户端中的POST实现类。<ul>
<li>比如，创建一个HTTPServlet实现类，但是里面只重写了doPOST方法，此时打开Tomcat客户端，但是无法直接通过浏览器访问POST实现类。</li>
<li>不过，可以通过使用POST方法传递的表单来实现。定义一个这样的POST表单，打开Tomcat客户端，访问POST表单，继而完成在Tomcat服务器中的操作。</li>
</ul>
</li>
</ul>
<h1 id="抽象方法"><a href="#抽象方法" class="headerlink" title="抽象方法"></a>抽象方法</h1><ol>
<li><strong>service  提供服务的方法</strong><ul>
<li>只要servlet服务器被访问，service方法就会执行。</li>
</ul>
</li>
<li>*<em>init  初始化的方法 *</em><ul>
<li>无论servlet服务器被访问多少次，init方法只会执行一次。</li>
</ul>
</li>
<li>*<em>destroy  销毁的方法 *</em><ul>
<li>当servlet服务器被正常关闭时，destroy方法会执行一次。</li>
</ul>
</li>
<li>*<em>getServletConfig    获取配置对象的方法 *</em></li>
<li>*<em>getServletInfo    获取servlet信息的方法 *</em><blockquote>
<p>java文件</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 初始化方法 */</span></span><br><span class="line">      <span class="comment">// 只会执行一次</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"===init()执行了"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 获取配置对象方法 */</span></span><br><span class="line">      <span class="comment">//ServletConfig：配置对象</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 提供服务的方法 */</span></span><br><span class="line">      <span class="comment">// servlet被访问一次，就执行一次</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"===service()执行了"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 获取servlet信息方法*/</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 销毁方法 */</span></span><br><span class="line">      <span class="comment">// servlet正常关闭时，执行一次。</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"===destroy&#123;&#125;执行了"</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h1><h2 id="被创建"><a href="#被创建" class="headerlink" title="被创建"></a>被创建</h2><ul>
<li>servlet被创建时会执行init方法，且只执行一次。</li>
</ul>
<h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><ul>
<li>默认情况下，在servlet服务器第一次被访问时，Servlet被创建。<ul>
<li>web.xml文件中，可以配置执行Servlet的创建时机。</li>
<li>在&lt;servlet&gt;标签下配置 <ol>
<li>第一次被访问时<ul>
<li>创建&lt;load-on-startup&gt;标签，值为负数</li>
</ul>
</li>
<li>在服务器启动时<ul>
<li>创建&lt;load-on-startup&gt;标签，值为0或正整数</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="安全问题"><a href="#安全问题" class="headerlink" title="安全问题"></a>安全问题</h3><ul>
<li>Servlet的init方法，只执行一次，说明一个Servlet在内存中只存在一个对象，Servlet是单例的。<ul>
<li>所以多个用户同时访问时，可能存在线程安全问题。</li>
<li>解决：尽量不要在Servlet中定义成员变量。即使定义了成员变量，也不要对其修改值。</li>
</ul>
</li>
</ul>
<h2 id="提供服务"><a href="#提供服务" class="headerlink" title="提供服务"></a>提供服务</h2><ul>
<li>每次访问Servlet服务器时，Service方法都会被调用一次。</li>
</ul>
<h2 id="被销毁"><a href="#被销毁" class="headerlink" title="被销毁"></a>被销毁</h2><ul>
<li>Servlet服务器被销毁时执行一次。<ul>
<li>只有服务器正常关闭时，才会执行destroy方法。</li>
<li>destroy方法在Servlet被销毁之前执行，一般用于释放资源</li>
</ul>
</li>
</ul>
<h1 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h1><ul>
<li>上述情况下，我们发现一个问题，即每次新建文件都需要在web.xml文件中添加虚拟路径。</li>
<li>为了解决这个问题，官方在Servlet3.0版本支持了注解配置，从而代替web.xml文件了。<ul>
<li>在web.xml文件，除了需要指定虚拟目录以外，还需要指定文件目录。</li>
<li>而对于注解来说，@WebServlet已经定义在文件中了，所以只需要指定虚拟目录即可。</li>
</ul>
</li>
</ul>
<h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><ol>
<li>创建JavaEE项目</li>
<li>定义一个实现了Servlet接口的类</li>
<li>实现Servlet接口中的抽象方法</li>
<li>重写抽象方法，输出文字</li>
<li>在类上使用@WebServlet注解，进行配置<ul>
<li><strong>@WebServlet(urlPatterns = “/demo3”)</strong></li>
<li>*<em>@WebServlet(“/demo3”) *</em><ul>
<li>此处填写的源代码应是”value=’’demo3” “，</li>
<li>如果注解后只写一个属性的话，value可以不写。    </li>
</ul>
</li>
</ul>
</li>
<li>启动tomcat服务器</li>
<li>项目的访问路径 （虚拟目录）：<em>localhost:8080/web/demo3</em></li>
<li>文字输出在服务器端</li>
<li>刷新一次页面，输出一次文字</li>
</ol>
<h1 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h1><ul>
<li><strong>Servlet 接口</strong> <ul>
<li><strong>GenericServlet  抽象类</strong> （继承）<ul>
<li><strong>HttpServlet  抽象类</strong>（继承）</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="GenericServlet-抽象类"><a href="#GenericServlet-抽象类" class="headerlink" title="GenericServlet  抽象类"></a>GenericServlet  抽象类</h2><ul>
<li>GenericServlet抽象类 将Servlet接口中其他的抽象方法默认空实现，只将service()方法作为抽象方法。</li>
<li>上述情况下，我们仍可以发现一个问题，即创建的实现了servlet接口的Java类中，有许多我们不需要重写的抽象方法。但是大部分情况下我只用需要实现service方法，那我们为什么不能不实现其他方法呢？</li>
<li>为了解决这个问题，我们可以通过GenericServlet抽象类来完成。<ul>
<li>Java类不再是 实现servlet接口</li>
<li>Java类如今是 继承GenericServelet抽象类</li>
</ul>
</li>
</ul>
<h2 id="HttpServlet-抽象类"><a href="#HttpServlet-抽象类" class="headerlink" title="HttpServlet 抽象类"></a>HttpServlet 抽象类</h2><ul>
<li>HttpServlet抽象类在其父类GenericServlet  抽象类的功能上更进一步。为了可以获取正确的数据，HttpServlet抽象类对请求的方法（get、post）自动进行了判断。<ul>
<li>Java类继承 HttpServlet抽象类</li>
<li>复写doGet/doPost方法</li>
</ul>
</li>
</ul>
<h1 id="相关配置"><a href="#相关配置" class="headerlink" title="相关配置"></a>相关配置</h1><ul>
<li>urlpartten：Servlet访问路径<ul>
<li>一个Servlet可以定义多个访问路径 ： @WebServlet({“/d4”,”/dd4”,”/ddd4”})</li>
</ul>
</li>
<li>路径定义规则：<ul>
<li>目录结构：/xxx</li>
<li>多层目录结构：/xxx/xxx</li>
<li>文件名：*.do</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://Water1127.github.io/2019/07/11/HTTP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="w.">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Water">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/07/11/HTTP/" class="post-title-link" itemprop="url">HTTP</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-07-11 18:50:37" itemprop="dateCreated datePublished" datetime="2019-07-11T18:50:37+08:00">2019-07-11</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-07-19 16:35:28" itemprop="dateModified" datetime="2019-07-19T16:35:28+08:00">2019-07-19</time>
              </span>
            
          

          

          
            
            
          

          
          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span title="本文字数">0</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span title="阅读时长">1 分钟</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/header.jpg" alt="w.">
            
              <p class="site-author-name" itemprop="name">w.</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                    <span class="site-state-item-count">1</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">24</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Water1127" title="GitHub &rarr; https://github.com/Water1127" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:1219042242@qq.com" title="E-Mail &rarr; mailto:1219042242@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.canye365.cn" title="https://www.canye365.cn" rel="noopener" target="_blank">残夜</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.imcyc.ml" title="https://www.imcyc.ml" rel="noopener" target="_blank">Morty</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.tmiracle.xyz/" title="https://www.tmiracle.xyz/" rel="noopener" target="_blank">Tmiracle</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </div>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2018 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">w.</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">73k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">1:06</span>
  
</div>









        








        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>




  

  


  <script src="/js/next-boot.js?v=7.2.0"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
